angular.module("mwFormBuilder",["ngSanitize","ui.bootstrap","ng-sortable","pascalprecht.translate"]).constant("MW_QUESTION_TYPES",["text","textarea","radio","checkbox","grid","priority","division","number","date","time","email","range","url"]).value("mwFormBuilderOptions",{});
angular.module("mwFormBuilder").service("mwFormUuid",function(){function r(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}this.get=function(){return r()+r()+r()+r()+r()+r()+r()+r()}}).factory("mwFormClone",["mwFormUuid",function(r){function e(n,t){if(t&&(a=[]),!(a.indexOf(n)>=0)&&(a.push(n),!n!==Object(n))){if(Array.isArray(n))return void n.forEach(e);for(var o in n)n.hasOwnProperty(o)&&e(n[o]);if(n.hasOwnProperty("id")){var i=r.get();n.id;n.id=i}}}var n={},a=[];return n.cloneElement=function(r){var n={};return angular.copy(r,n),e(n,!0),n},n.clonePage=function(e){var a={};angular.copy(e,a),a.id=r.get();var t=[];if(Array.isArray(e.elements))for(var o=0;o<e.elements.length;o++)t.push(n.cloneElement(e.elements[o]));return a.elements=t,a},n.cloneForm=function(r){var e={};angular.copy(r,e);var a=[];if(Array.isArray(r.pages))for(var t=0;t<r.pages.length;t++)a.push(n.clonePage(r.pages[t]));return e.pages=a,e},n}]);
angular.module("mwFormBuilder").run(["$templateCache",function(t){t.put("mw-form-builder.html",'<div class=mw-form-builder><form name=ctrl.form role=form novalidate><div class=mw-title-page><div class=form-group><mw-label label-for=formName label-key=mwForm.form.name></mw-label><input type=text class=form-control name=formName id=formName ng-model=ctrl.formData.name ng-readonly=ctrl.readOnly placeholder="{{\'mwForm.form.name.placeholder\'|translate}}" required></div><div class=form-group><mw-label label-for=formDescription label-key=mwForm.form.description></mw-label><textarea msd-elastic class=form-control name=formDescription ng-model=ctrl.formData.description id=formDescription ng-readonly=ctrl.readOnly>\n            </textarea></div></div><div class=form-page-list><mw-form-page-builder ng-repeat="page in ctrl.formData.pages" form-page=page form-object=ctrl.formData is-first=$first is-last=$last read-only=ctrl.readOnly></mw-form-page-builder></div><button type=button class="btn btn-default mw-add-new-page-button" ng-click=ctrl.addPage() ng-if=!ctrl.readOnly><i class="fa fa-plus"></i> <span translate=mwForm.buttons.addPage></span></button><mw-form-confirmation-page-builder form-object=ctrl.formData read-only=ctrl.readOnly></mw-form-confirmation-page-builder></form></div>'),t.put("mw-form-confirmation-page-builder.html",'<div class="mw-form-page-builder mw-confirmation-page"><div><div class=mw-page-tab-container><div class=mw-form-page-tab><span class=mw-page-tab-text role=heading translate=mwForm.confirmationPage.title>Strona potwierdzenia</span></div><div class=mw-page-tab-triangle></div></div><div ng-form=ctrl.form role=form novalidate class=form-page-builder-body><div class=form-group><textarea msd-elastic class=form-control name=confirmationMessage ng-model=ctrl.formObject.confirmationMessage aria-label="{{\'mwForm.confirmationPage.customMessage\'|translate}}" placeholder="{{\'mwForm.confirmationPage.customMessage\'|translate}}" ng-disabled=ctrl.readOnly></textarea></div></div></div></div>'),t.put("mw-form-image-builder.html",'<div class=mw-form-image-builder-wrapper><div class=mw-form-image-builder ng-class="{\'ng-submitted\':ctrl.formSubmitted}"><div class=image-editor ng-form=ctrl.form ng-if=!ctrl.isPreview><button ng-if=!ctrl.image.src ng-click=ctrl.selectImageButtonClicked() type=button class="btn btn-default" translate=mwForm.image.selectImageButton>Select image</button><div class="image-edition row" ng-if=ctrl.image.src><div class=col-md-12 ng-class="\'align-\'+ctrl.image.align"><img ng-src={{ctrl.image.src}}></div><div class="col-md-12 image-align-control"><div class=btn-group role=group aria-label="Image align"><button type=button class="btn btn-default" ng-class="{\'selected\': ctrl.image.align==\'left\'}" ng-click="ctrl.setAlign(\'left\')"><i class="fa fa-align-left"></i></button> <button type=button class="btn btn-default" ng-class="{\'selected\': ctrl.image.align==\'center\'}" ng-click="ctrl.setAlign(\'center\')"><i class="fa fa-align-center"></i></button> <button type=button class="btn btn-default" ng-class="{\'selected\': ctrl.image.align==\'right\'}" ng-click="ctrl.setAlign(\'right\')"><i class="fa fa-align-right"></i></button></div></div><div class=form-horizontal><div class=form-group><label ng-attr-for=image-caption-{{ctrl.id}} class="col-sm-2 control-label">Podpis</label><div class=col-sm-8><input type=text class=form-control name=text ng-attr-id=image-caption-{{ctrl.id}} ng-model=ctrl.image.caption ng-readonly=ctrl.readOnly></div></div></div></div><div class=row ng-if=ctrl.image.src><br><br><div class=col-xs-2><button type=button class="btn btn-primary" ng-click=ctrl.save() translate=mwForm.buttons.questionReady>Gotowe</button></div></div></div><div class=mw-preview ng-if=ctrl.isPreview><figure ng-class="\'align-\'+ctrl.image.align"><img ng-src={{ctrl.image.src}} ng-attr-alt=ctrl.image.caption><figcaption ng-if=ctrl.image.caption>{{ctrl.image.caption}}</figcaption></figure></div></div></div>'),t.put("mw-form-page-builder.html",'<div class=mw-form-page-builder ng-class="{\'page-folded\': ctrl.isFolded}"><div ng-mouseover=ctrl.hoverIn() ng-mouseleave=ctrl.hoverOut()><div class=mw-page-tab-container><div class=mw-form-page-tab><span class=mw-page-tab-text role=heading translate=mwForm.page.tab.heading translate-values="{page: ctrl.formPage.number, allPages:ctrl.formObject.pages.length}">Strona 1 z 3</span> <span class=mw-page-tab-checkbox><label><input type=checkbox ng-model=ctrl.formPage.namedPage ng-disabled=ctrl.readOnly><span class=mw-page-tab-checkbox-text translate=mwForm.page.pageWithNameCheckbox>named</span></label></span></div><div class=mw-page-tab-triangle></div><div class=mw-page-tab-actions ng-switch=ctrl.readOnly><button type=button class=fold-button ng-click=ctrl.fold() ng-attr-title="{{\'mwForm.buttons.fold\' | translate}}" uib-popover="{{\'mwForm.buttons.fold\' | translate}}" popover-trigger=mouseenter popover-placement=top><i class="fa fa-compress"></i></button> <button type=button class=unfold-button ng-click=ctrl.unfold() ng-attr-title="{{\'mwForm.buttons.unfold\' | translate}}" uib-popover="{{\'mwForm.buttons.unfold\' | translate}}" popover-trigger=mouseenter popover-placement=top><i class="fa fa-expand"></i></button> <button type=button class=move-down-button ng-click=ctrl.moveDown() ng-if=!ctrl.isLast ng-switch-when=false ng-attr-title="{{\'mwForm.buttons.moveDown\' | translate}}" uib-popover="{{\'mwForm.buttons.moveDown\' | translate}}" popover-trigger=mouseenter popover-placement=top><i class="fa fa-chevron-down"></i></button> <button type=button class=move-up-button ng-click=ctrl.moveUp() ng-if=!ctrl.isFirst ng-switch-when=false ng-attr-title="{{\'mwForm.buttons.moveUp\' | translate}}" uib-popover="{{\'mwForm.buttons.moveUp\' | translate}}" popover-trigger=mouseenter popover-placement=top><i class="fa fa-chevron-up"></i></button> <button type=button class=remove-button mw-confirm-click confirmed-action=ctrl.removePage() ng-switch-when=false ng-attr-title="{{\'mwForm.buttons.removePage\' | translate}}" uib-popover="{{\'mwForm.buttons.removePage\' | translate}}" popover-trigger=mouseenter popover-placement=top><i class="fa fa-trash"></i></button></div></div><div ng-form=ctrl.form role=form novalidate class=form-page-builder-body><div class=form-group ng-if=ctrl.formPage.namedPage><label ng-attr-for=page-name-{{ctrl.formPage.number}} translate=mwForm.page.name>Nazwa strony</label> <input type=text class=form-control name=pageName ng-attr-id=page-name-{{ctrl.formPage.number}} ng-model=ctrl.formPage.name ng-readonly=ctrl.readOnly></div><div class=page-element-list ng-sortable=ctrl.sortableConfig ng-model=ctrl.formPage.elements><div class="empty-page-element-list-label form-group" ng-if="!ctrl.formPage.elements || (ctrl.formPage.elements && ctrl.formPage.elements.length === 0)"><span translate=mwForm.page.elements.empty>Brak elementów</span></div><mw-form-page-element-builder ng-repeat="element in ctrl.formPage.elements" page-element=element form-object=ctrl.formObject is-active=ctrl.isElementActive(element) on-ready=ctrl.onElementReady() ng-click=ctrl.selectElement(element) is-first=$first is-last=$last read-only=ctrl.readOnly></mw-form-page-element-builder></div><div uib-dropdown class="add-element btn-group" ng-if=!ctrl.readOnly><button type=button class="btn btn-default" ng-click=ctrl.addElement()><span translate=mwForm.buttons.addElement>Add element</span></button> <button type=button class="btn btn-default" uib-dropdown-toggle aria-haspopup=true aria-expanded=false><span class=caret></span> <span class=sr-only>Split button!</span></button><ul uib-dropdown-menu aria-labelledby=simple-dropdown role=menu><li><button type=button ng-click=ctrl.addQuestion()><span translate=mwForm.elements.question>Pytanie</span><i class="fa fa-question-circle fa-lg fa-fw" style="margin-left: 10px;"></i></button></li><li><button type=button ng-click=ctrl.addImage()><span translate=mwForm.elements.image>Obraz</span><i class="fa fa-picture-o fa-lg fa-fw" style="margin-left: 10px;"></i></button></li><li><button type=button ng-click=ctrl.addParagraph()><span translate=mwForm.elements.paragraph>Obraz</span><i class="fa fa-paragraph fa-lg fa-fw" style="margin-left: 10px;"></i></button></li></ul></div></div><table cellspacing=0 class=mw-page-bottom-tab-container ng-if=!ctrl.isLast><tr><td class=mw-page-bottom-tab-triangle></td><td class=mw-form-page-bottom-tab><div class="page-flow-select form-inline"><label translate=mwForm.pageFlow.afterPage translate-values={page:ctrl.formPage.number} ng-attr-for=page-flow-select-{{ctrl.formPage.number}}>Po stronie 1</label><select ng-attr-id=page-flow-select-{{ctrl.formPage.number}} ng-options="pageFlow.label|translate:pageFlow for pageFlow in ctrl.possiblePageFlow" ng-model=ctrl.formPage.pageFlow class=form-control ng-disabled=ctrl.readOnly></select></div></td><td class=mw-page-bottom-tab-actions><button type=button role=button class=btn ng-click=ctrl.addPage() ng-if=!ctrl.readOnly ng-attr-title="{{\'mwForm.buttons.addPage\' | translate}}" uib-popover="{{\'mwForm.buttons.addPage\' | translate}}" popover-trigger=mouseenter popover-placement=top><i class="fa fa-plus"></i></button></td></tr></table></div></div>'),t.put("mw-form-page-element-builder.html",'<div class=mw-form-page-element-builder-wrapper><div class=mw-form-page-element-builder ng-class="{\'active\': ctrl.isActive, \'inactive draggable\': !ctrl.isActive}"><div class=mw-page-element-actions-tab ng-switch=ctrl.isActive&&!ctrl.readOnly><div ng-switch-when=true><button type=button class=move-down-button ng-click=ctrl.moveDown() ng-if=!ctrl.isLast ng-attr-title="{{\'mwForm.buttons.moveDown\' | translate}}" uib-popover="{{\'mwForm.buttons.moveDown\' | translate}}" popover-trigger=mouseenter popover-placement=top><i class="fa fa-chevron-down"></i></button> <button type=button class=move-up-button ng-click=ctrl.moveUp() ng-if=!ctrl.isFirst ng-attr-title="{{\'mwForm.buttons.moveUp\' | translate}}" uib-popover="{{\'mwForm.buttons.moveUp\' | translate}}" popover-trigger=mouseenter popover-placement=top><i class="fa fa-chevron-up"></i></button> <button type=button class=remove-button mw-confirm-click confirmed-action=ctrl.removeElement() ng-attr-title="{{\'mwForm.buttons.remove\' | translate}}" uib-popover="{{\'mwForm.buttons.remove\' | translate}}" popover-trigger=mouseenter popover-placement=top><i class="fa fa-trash"></i></button></div><div ng-switch-when=false><button type=button aria-label="{{\'mwForm.buttons.clone\' | translate}}" aria-hidden=false class=edit-button ng-click=ctrl.cloneElement($event) ng-if=!ctrl.readOnly ng-attr-title="{{\'mwForm.buttons.clone\' | translate}}" uib-popover="{{\'mwForm.buttons.clone\' | translate}}" popover-trigger=mouseenter popover-placement=top><i class="fa fa-clone"></i></button> <button type=button aria-label="{{\'mwForm.buttons.edit\' | translate}}" aria-hidden=false class=edit-button ng-click=ctrl.editElement() ng-if=!ctrl.readOnly ng-attr-title="{{\'mwForm.buttons.edit\' | translate}}" uib-popover="{{\'mwForm.buttons.edit\' | translate}}" popover-trigger=mouseenter popover-placement=top><i class="fa fa-pencil"></i></button> <button type=button aria-label="{{\'mwForm.buttons.view\' | translate}}" aria-hidden=false class=edit-button ng-click=ctrl.editElement() ng-if=ctrl.readOnly ng-attr-title="{{\'mwForm.buttons.view\' | translate}}" uib-popover="{{\'mwForm.buttons.view\' | translate}}" popover-trigger=mouseenter popover-placement=top><i class="fa fa-eye"></i></button> <button type=button ng-click=ctrl.callback($event,button) ng-attr-title="{{button.title | translate}}" class=edit-button aria-label="{{button.title | translate}}" aria-hidden=false ng-if=!ctrl.readOnly ng-repeat="button in ctrl.options.elementButtons" uib-popover="{{button.title | translate}}" popover-trigger=mouseenter popover-append-to-body popover-placement=right><i class={{button.icon}}></i> {{button.text}}</button></div></div><div ng-switch=ctrl.pageElement.type><mw-form-question-builder ng-switch-when=question question=ctrl.pageElement.question form-object=ctrl.formObject on-ready=ctrl.onReady() is-preview=!ctrl.isActive read-only=ctrl.readOnly></mw-form-question-builder><mw-form-image-builder ng-switch-when=image image=ctrl.pageElement.image form-object=ctrl.formObject on-ready=ctrl.onReady() is-preview=!ctrl.isActive read-only=ctrl.readOnly on-image-selection=ctrl.onImageSelection()></mw-form-image-builder><mw-form-paragraph-builder ng-switch-when=paragraph paragraph=ctrl.pageElement.paragraph form-object=ctrl.formObject on-ready=ctrl.onReady() is-preview=!ctrl.isActive read-only=ctrl.readOnly></mw-form-paragraph-builder></div></div></div>'),t.put("mw-form-paragraph-builder.html",'<div class=mw-form-paragraph-builder-wrapper><div class=mw-form-paragraph-builder ng-class="{\'ng-submitted\':ctrl.formSubmitted}"><div class=paragraph-editor ng-form=ctrl.form ng-if=!ctrl.isPreview><textarea msd-elastic class="form-control mw-form-paragraph-textarea" ng-model=ctrl.paragraph.html required ng-attr-id=paragraph-textarea-{{ctrl.id}} ng-readonly=ctrl.readOnly ng-attr-placeholder="{{\'mwForm.paragraph.placeholder\'|translate}}"></textarea><div class=row><br><div class=col-xs-2><button type=button class="btn btn-primary" ng-click=ctrl.save() translate=mwForm.buttons.questionReady>Gotowe</button></div></div></div><div class=mw-preview ng-if=ctrl.isPreview><p ng-bind-html=ctrl.paragraph.html></p></div></div></div>'),t.put("mw-form-question-builder.html",'<div class=mw-form-question-builder-wrapper><div class=mw-form-question-builder ng-class="{\'ng-submitted\':ctrl.formSubmitted}"><div ng-form=ctrl.form ng-if=!ctrl.isPreview><div class=form-horizontal><div class=form-group><mw-label label-for=question-text-{{ctrl.id}} label-class="col-sm-2 control-label" label-key=mwForm.question.text></mw-label><div class="col-sm-10 col-md-8"><input type=text class=form-control name=text ng-attr-id=question-text-{{ctrl.id}} ng-model=ctrl.question.text ng-readonly=ctrl.readOnly required></div></div><div class="form-group mw-question-type"><mw-label label-for=question-type-{{ctrl.id}} label-class="col-sm-2 control-label" label-key=mwForm.question.type></mw-label><div class="col-sm-10 form-inline"><select ng-attr-id=question-type-{{ctrl.id}} ng-options="\'mwForm.question.types.\'+type+\'.name\'|translate for type in ctrl.questionTypes" ng-model=ctrl.question.type ng-change=ctrl.questionTypeChanged() class=form-control ng-disabled=ctrl.readOnly required></select><div class=checkbox ng-if="ctrl.question.type==\'radio\'"><label><input type=checkbox ng-model=ctrl.question.pageFlowModifier ng-change=ctrl.pageFlowModifierChanged() ng-readonly=ctrl.readOnly> <span translate=mwForm.pageFlow.afterQuestionAnswer>Przejdź do strony w oparciu o odpowiedź</span></label></div></div></div></div><div class=row ng-if=ctrl.question.type><div class="mw-form-question-answers-builder col-sm-10 col-sm-offset-2 col-md-8" ng-switch=ctrl.question.type><div ng-if="ctrl.question.type==\'text\'"><input class=form-control type=text disabled value="{{\'mwForm.question.preview.text\'|translate}}"></div><div ng-switch-when=textarea><textarea class=form-control disabled>{{\'mwForm.question.preview.textarea\'|translate}}</textarea></div><div ng-switch-when=radio><mw-question-offered-answer-list-builder question=ctrl.question form-object=ctrl.formObject read-only=ctrl.readOnly></mw-question-offered-answer-list-builder></div><div ng-switch-when=checkbox><mw-question-offered-answer-list-builder question=ctrl.question form-object=ctrl.formObject read-only=ctrl.readOnly></mw-question-offered-answer-list-builder></div><div ng-switch-when=priority><mw-question-priority-list-builder question=ctrl.question read-only=ctrl.readOnly></mw-question-priority-list-builder></div><div ng-switch-when=number class=form-inline><div class="range-config form-inline"><span translate=mwForm.question.number.min>Min</span>: <input class=form-control type=number ng-model=ctrl.question.min max={{ctrl.question.max}} ng-readonly=ctrl.readOnly> <span translate=mwForm.question.number.max>Max</span>: <input class=form-control type=number min={{ctrl.question.min}} ng-model=ctrl.question.max ng-readonly=ctrl.readOnly></div><br><input class=form-control type=number disabled></div><div ng-switch-when=date class=form-inline><input class=form-control type=date disabled></div><div ng-switch-when=datetime class=form-inline><input class=form-control type=datetime disabled></div><div ng-switch-when=time class=form-inline><input class=form-control type=datetime disabled></div><div ng-switch-when=email class=form-inline><input class=form-control type=email disabled></div><div ng-switch-when=range><div class="range-config form-inline"><span translate=mwForm.question.range.from>Range from</span> <input class=form-control type=number ng-model=ctrl.question.min required ng-readonly=ctrl.readOnly> <span translate=mwForm.question.range.to>to</span> <input class=form-control type=number ng-model=ctrl.question.max required ng-readonly=ctrl.readOnly></div><br><div class=mw-range><input min=ctrl.question.min max=ctrl.question.max type=range disabled></div></div><div ng-switch-when=url class=form-inline><input class=form-control type=url disabled></div></div><div class=col-sm-12 ng-if="ctrl.question.type==\'grid\'"><mw-question-grid-builder question=ctrl.question read-only=ctrl.readOnly></mw-question-grid-builder></div><div class=col-sm-12 ng-if="ctrl.question.type==\'division\'"><mw-question-division-builder question=ctrl.question read-only=ctrl.readOnly></mw-question-division-builder></div></div><br><br><div class=row><div class=col-xs-2><button type=button class="btn btn-primary" ng-click=ctrl.save() translate=mwForm.buttons.questionReady>Gotowe</button></div><div class=col-xs-10><div class=checkbox><label><input type=checkbox ng-model=ctrl.question.required ng-disabled=ctrl.readOnly><span translate=mwForm.question.required>Required</span></label></div></div></div></div><div class=mw-preview ng-if=ctrl.isPreview><div class=mw-question-text>{{ctrl.question.text}} <span ng-if=ctrl.question.required>*</span></div><div class=question-answers ng-switch=ctrl.question.type><div ng-switch-when=text><input class=form-control type=text disabled value="{{\'mwForm.question.preview.text\'|translate}}"></div><div ng-switch-when=number class=form-inline><input class=form-control type=number disabled></div><div ng-switch-when=date class=form-inline><input class=form-control type=date disabled></div><div ng-switch-when=datetime class=form-inline><input class=form-control type=datetime disabled></div><div ng-switch-when=time class=form-inline><input class=form-control type=time disabled></div><div ng-switch-when=email class=form-inline><input class=form-control type=email disabled></div><div ng-switch-when=range class=mw-range><input ng-attr-min={{ctrl.question.min}} ng-attr-max={{ctrl.question.max}} type=range disabled></div><div ng-switch-when=url class=form-inline><input class=form-control type=url disabled></div><div ng-switch-when=textarea><textarea class=form-control type=text disabled>{{\'mwForm.question.preview.textarea\'|translate}}</textarea></div><div ng-switch-when=radio><div class=radio ng-repeat="answer in ctrl.question.offeredAnswers"><label><input type=radio> {{answer.value}}</label></div><div class=radio ng-if=ctrl.question.otherAnswer><label><input type=radio><span translate=mwForm.question.preview.otherAnswer>Inna</span>:</label> <span class=form-inline><input type=text class=form-control disabled></span></div></div><div ng-switch-when=checkbox><div class=checkbox ng-repeat="answer in ctrl.question.offeredAnswers"><label><input type=checkbox> {{answer.value}}</label></div><div class=checkbox ng-if=ctrl.question.otherAnswer><label><input type=checkbox><span translate=mwForm.question.preview.otherAnswer>Inna</span>:</label> <span class=form-inline><input type=text class=form-control disabled></span></div></div><div ng-switch-when=grid><div class=table-responsive><table class="table table-condensed table-striped" border=0 cellpadding=5 cellspacing=0><thead><tr><td></td><td ng-repeat="col in ctrl.question.grid.cols"><label>{{col.label}}</label></td></tr></thead><tbody><tr ng-repeat="row in ctrl.question.grid.rows"><td>{{row.label}}</td><td ng-repeat="col in ctrl.question.grid.cols"><input type=radio></td></tr></tbody></table></div></div><div class=mw-priority-list ng-switch-when=priority><table><thead><tr><th translate=mwForm.question.priority.sorted>Sorted</th><th translate=mwForm.question.priority.available>Available</th></tr></thead><tbody><tr><td class=mw-ordered-items></td><td class=mw-available-items><div class=mw-item ng-repeat="item in ctrl.question.priorityList">{{::item.value}}</div></td></tr></tbody></table></div><div ng-switch-when=division><div class=form-inline style="margin-bottom: 5px" ng-repeat="item in ctrl.question.divisionList"><div class=form-group><label>{{item.value}}</label> <input type=number class=form-control style="width: 80px"> <span>{{ctrl.question.unit}}</span></div></div><div class=form-inline style="margin-bottom: 5px"><div class=form-group><label translate=mwForm.question.division.assignedSumLabel>Przydzielono</label> <input type=number class="form-control strict-validation" style="width: 80px" readonly value=0> <span>{{ctrl.question.unit}} <span translate=mwForm.question.division.fromRequiredLabel>z wymaganych</span> <strong>{{ctrl.question.quantity}}</strong> {{ctrl.question.unit}}</span></div></div></div></div></div></div></div>'),t.put("mw-label.html","<label ng-attr-for={{::ctrl.labelFor}} ng-attr-class={{::ctrl.labelClass}}>{{ctrl.labelKey|translate:ctrl.labelTranslateValues}}</label>"),t.put("mw-question-division-builder.html",'<div class=mw-question-division-builder><div class=form-horizontal><div class=form-group><mw-label label-for=division-quantity-{{ctrl.question.id}} label-class="col-sm-2 control-label" label-key=mwForm.question.division.quantity></mw-label><div class="col-sm-10 col-md-8 form-inline"><input ng-attr-id=division-quantity-{{ctrl.question.id}} type=number ng-model=ctrl.question.quantity required class=form-control min=1 ng-readonly=ctrl.readOnly></div></div><div class=form-group><mw-label label-for=division-unit-{{ctrl.question.id}} label-class="col-sm-2 control-label" label-key=mwForm.question.division.unit></mw-label><div class="col-sm-10 col-md-8 form-inline"><input ng-attr-id=division-unit-{{ctrl.question.id}} type=text ng-model=ctrl.question.unit required class=form-control ng-readonly=ctrl.readOnly></div></div></div><div class="col-sm-10 col-sm-offset-2 col-md-8"><div class=question-division-list ng-sortable=ctrl.itemsSortableConfig ng-model=ctrl.question.divisionList role=list><div class=mw-question-division-list-item ng-repeat="item in ctrl.question.divisionList" role=listitem><div class=drag-handle ng-if=!ctrl.readOnly><i class="fa fa-arrows-v fa-lg handle-inner"></i></div><input wd-focus-me=ctrl.isNewItem[item.id] type=text ng-model=item.value ng-keypress=ctrl.keyPressedOnInput($event,item) required class="form-control item-value" ng-readonly=ctrl.readOnly> <button role=button class=remove-item-button ng-click=ctrl.removeItem(item) ng-if=!ctrl.readOnly><i class="fa fa-times"></i></button></div></div><div class="mw-question-division-list-item add-new-item-widget"><div class=drag-handle></div><span ng-click=ctrl.addNewItem() role=button ng-if=!ctrl.readOnly><input type=text required class=form-control value="Kliknij aby dodać pozycję"></span></div></div></div>'),t.put("mw-question-grid-builder.html",'<div class=mw-question-grid-builder><div class="form-horizontal mw-grid-rows-builder"><div class=mw-grid-row-list ng-sortable=ctrl.rowsSortableConfig ng-model=ctrl.question.grid.rows role=list><div class="mw-grid-item form-group" ng-repeat="row in ctrl.question.grid.rows" role=listitem><mw-label label-for=mw-grid-row-{{row.id}}-label label-class="col-sm-2 control-label" label-key=mwForm.question.grid.rowLabel label-translate-values="{row: row.orderNo}"></mw-label><div class="col-sm-10 col-md-8"><div class=drag-handle><i class="fa fa-arrows-v fa-lg handle-inner"></i></div><input ng-attr-id=mw-grid-row-{{row.id}}-label wd-focus-me=ctrl.isNewInput[row.id] type=text ng-model=row.label ng-keypress="ctrl.keyPressedOnInput($event,row, \'row\')" required class="form-control mw-item-label-value" ng-readonly=ctrl.readOnly> <button role=button class=remove-item-button ng-click=ctrl.removeRow(row) ng-if=!ctrl.readOnly><i class="fa fa-times"></i></button></div></div></div><div class="mw-grid-item form-group add-new-item-widget" ng-if=!ctrl.readOnly><label class="col-sm-2 control-label" translate=mwForm.question.grid.rowLabel translate-values="{row: ctrl.question.grid.rows.length+1}">Etykieta wiersza {{ctrl.question.grid.rows.length+1}}</label><div class="col-sm-10 col-md-8"><div class=drag-handle></div><span ng-click=ctrl.addNewRow() role=button><input type=text required class=form-control value="{{\'mwForm.question.grid.clickToAddRow\'|translate}}"></span></div></div></div><div class=row><div class="mw-grid-separator col-sm-9 col-sm-offset-1"></div></div><div class="form-horizontal mw-grid-cols-builder"><div class=mw-grid-col-list ng-sortable=ctrl.colsSortableConfig ng-model=ctrl.question.grid.cols role=list><div class="mw-grid-item form-group" ng-repeat="col in ctrl.question.grid.cols" role=listitem><mw-label label-for=mw-grid-col-{{col.id}}-label label-class="col-sm-2 control-label" label-key=mwForm.question.grid.columnLabel label-translate-values="{col: col.orderNo}"></mw-label><div class="col-sm-10 col-md-8"><div class=drag-handle><i class="fa fa-arrows-v fa-lg handle-inner"></i></div><input ng-attr-id=mw-grid-col-{{col.id}}-label wd-focus-me=ctrl.isNewInput[col.id] type=text ng-model=col.label ng-keypress="ctrl.keyPressedOnInput($event,col, \'col\')" required class="form-control mw-item-label-value" ng-readonly=ctrl.readOnly> <button role=button class=remove-item-button ng-click=ctrl.removeCol(col) ng-if=!ctrl.readOnly><i class="fa fa-times"></i></button></div></div></div><div class="mw-grid-item form-group add-new-item-widget" ng-if=!ctrl.readOnly><label class="col-sm-2 control-label" translate=mwForm.question.grid.columnLabel translate-values="{col: ctrl.question.grid.cols.length+1}">Etykieta kolumny {{ctrl.question.grid.cols.length+1}}</label><div class="col-sm-10 col-md-8"><div class=drag-handle></div><span ng-click=ctrl.addNewCol() role=button><input type=text required class=form-control value="{{\'mwForm.question.grid.clickToAddColumn\'|translate}}"></span></div></div></div></div>'),t.put("mw-question-offered-answer-list-builder.html",'<div class=question-offered-answer-list-builder><div class=question-offered-answer-list ng-sortable=ctrl.offeredAnswersSortableConfig ng-model=ctrl.question.offeredAnswers role=list><div class=mw-question-offered-answer ng-repeat="answer in ctrl.question.offeredAnswers" role=listitem><div class=drag-handle ng-if=!ctrl.readOnly><i class="fa fa-arrows-v fa-lg handle-inner"></i></div><div class=option-type-indicator><i ng-if="ctrl.question.type==\'radio\'" class="fa fa-circle-thin fa-fw"></i> <i ng-if="ctrl.question.type==\'checkbox\'" class="fa fa-square-o fa-fw"></i></div><input wd-focus-me=ctrl.isNewAnswer[answer.id] type=text ng-model=answer.value ng-keypress=ctrl.keyPressedOnInput($event,answer) required class="form-control offered-answer-value" ng-readonly=ctrl.readOnly> <button role=button class=remove-item-button ng-click=ctrl.removeOfferedAnswer(answer) ng-if=!ctrl.readOnly ng-attr-title="{{\'mwForm.buttons.remove\' | translate}}" uib-popover="{{\'mwForm.buttons.remove\' | translate}}" popover-trigger=mouseenter popover-placement=top><i class="fa fa-times"></i></button> <span ng-if=ctrl.question.pageFlowModifier class=form-inline><select ng-options="pageFlow.label|translate:pageFlow for pageFlow in ctrl.possiblePageFlow" ng-model=answer.pageFlow class=form-control ng-disabled=ctrl.readOnly></select></span></div></div><div class="mw-question-offered-answer add-new-answer-widget" ng-if=!ctrl.readOnly><div class=drag-handle></div><div class=option-type-indicator><i ng-if="ctrl.question.type==\'radio\'" class="fa fa-circle-thin fa-fw"></i> <i ng-if="ctrl.question.type==\'checkbox\'" class="fa fa-square-o fa-fw"></i></div><span ng-click=ctrl.addNewOfferedAnswer() role=button><input type=text class="form-control offered-answer-value" value="{{\'mwForm.question.buttons.addOption\'|translate}}"></span> <span class=add-custom-answer ng-if=!ctrl.question.otherAnswer><span translate=mwForm.question.orLabel>lub</span> <button role=button ng-click=ctrl.addCustomAnswer() translate=mwForm.question.buttons.addOther>Dodaj "Inne"</button></span></div><div class="mw-question-offered-answer custom-answer" ng-if=ctrl.question.otherAnswer><div class=drag-handle ng-if=!ctrl.readOnly></div><div class=option-type-indicator><i ng-if="ctrl.question.type==\'radio\'" class="fa fa-circle-thin fa-fw"></i> <i ng-if="ctrl.question.type==\'checkbox\'" class="fa fa-square-o fa-fw"></i></div><label translate=mwForm.question.otherLabel>Inna:</label> <input type=text value="{{\'mwForm.question.userAnswer\'|translate}}" class="form-control offered-answer-value" readonly> <button type=button role=button class=remove-item-button ng-click=ctrl.removeCustomAnswer() ng-if=!ctrl.readOnly ng-attr-title="{{\'mwForm.buttons.remove\' | translate}}" uib-popover="{{\'mwForm.buttons.remove\' | translate}}" popover-trigger=mouseenter popover-placement=top><i class="fa fa-times"></i></button></div></div>'),t.put("mw-question-priority-list-builder.html",'<div class=mw-question-priority-list-builder><div class=question-priority-list ng-sortable=ctrl.itemsSortableConfig ng-model=ctrl.question.priorityList role=list><div class=mw-question-priority-list-item ng-repeat="item in ctrl.question.priorityList" role=listitem><div class=drag-handle ng-if=!ctrl.readOnly><i class="fa fa-arrows-v fa-lg handle-inner"></i></div><input wd-focus-me=ctrl.isNewItem[item.id] type=text ng-model=item.value ng-keypress=ctrl.keyPressedOnInput($event,item) required class="form-control item-value" ng-readonly=ctrl.readOnly> <button role=button class=remove-item-button ng-click=ctrl.removeItem(item) ng-if=!ctrl.readOnly><i class="fa fa-times"></i></button></div></div><div class="mw-question-priority-list-item add-new-item-widget" ng-if=!ctrl.readOnly><div class=drag-handle></div><span ng-click=ctrl.addNewItem() role=button><input type=text required class=form-control value="{{\'mwForm.question.priority.clickToAddItem\'|translate}}"></span></div></div>')}]);
angular.module("mwFormBuilder").directive("mwQuestionPriorityListBuilder",function(){return{replace:!0,restrict:"AE",require:"^mwFormQuestionBuilder",scope:{question:"=",readOnly:"=?",options:"=?"},templateUrl:"mw-question-priority-list-builder.html",controllerAs:"ctrl",bindToController:!0,controller:["mwFormUuid",function(i){function e(i){if(i)for(var e=0;e<i.length;e++){var t=i[e];t.orderNo=e+1}}function t(i){i.sort(function(i,e){return i.orderNo-e.orderNo})}var r=this;r.isNewItem={},r.addNewItem=function(e){var t={id:i.get(),orderNo:r.question.priorityList.length+1,value:null};e||(r.isNewItem[t.id]=!0),r.question.priorityList.push(t)},r.question.priorityList||(r.question.priorityList=[],r.addNewItem()),t(r.question.priorityList),r.itemsSortableConfig={disabled:r.readOnly,placeholder:"beingDragged",handle:".drag-handle",stop:function(i,t){e(r.question.priorityList)}},r.removeItem=function(i){var e=r.question.priorityList.indexOf(i);-1!=e&&r.question.priorityList.splice(e,1)},r.keyPressedOnInput=function(i,e){delete r.isNewItem[e.id],13===i.which&&(i.preventDefault(),r.addNewItem())}}],link:function(i,e,t,r){i.ctrl}}});
angular.module("mwFormBuilder").directive("mwQuestionOfferedAnswerListBuilder",function(){return{replace:!0,restrict:"AE",require:"^mwFormQuestionBuilder",scope:{question:"=",formObject:"=",readOnly:"=?",options:"=?"},templateUrl:"mw-question-offered-answer-list-builder.html",controllerAs:"ctrl",bindToController:!0,controller:["FormQuestionBuilderId","mwFormUuid",function(e,r){function n(){if(s.question.offeredAnswers)for(var e=0;e<s.question.offeredAnswers.length;e++){var r=s.question.offeredAnswers[e];r.orderNo=e+1}}function o(){s.question.offeredAnswers&&s.question.offeredAnswers.sort(function(e,r){return e.orderNo-r.orderNo})}var s=this;s.config={radio:{},checkbox:{}},s.isNewAnswer={},o(),s.offeredAnswersSortableConfig={disabled:s.readOnly,placeholder:"beingDragged",handle:".drag-handle",stop:function(e,r){n()}},s.addNewOfferedAnswer=function(){var e=s.possiblePageFlow[0],n={id:r.get(),orderNo:s.question.offeredAnswers.length+1,value:null,pageFlow:e};s.isNewAnswer[n.id]=!0,s.question.offeredAnswers.push(n)},s.removeOfferedAnswer=function(e){var r=s.question.offeredAnswers.indexOf(e);-1!=r&&s.question.offeredAnswers.splice(r,1)},s.addCustomAnswer=function(){s.question.otherAnswer=!0},s.removeCustomAnswer=function(){s.question.otherAnswer=!1},s.keyPressedOnInput=function(e,r){delete s.isNewAnswer[r.id],13===e.which&&(e.preventDefault(),s.addNewOfferedAnswer())}}],link:function(e,r,n,o){var s=e.ctrl;s.possiblePageFlow=o.possiblePageFlow}}});
angular.module("mwFormBuilder").directive("mwQuestionGridBuilder",function(){return{replace:!0,restrict:"AE",require:"^mwFormQuestionBuilder",scope:{question:"=",formObject:"=",readOnly:"=?",options:"=?"},templateUrl:"mw-question-grid-builder.html",controllerAs:"ctrl",bindToController:!0,controller:["mwFormUuid",function(e){function o(e){if(e)for(var o=0;o<e.length;o++){var r=e[o];r.orderNo=o+1}}function r(e){e.sort(function(e,o){return e.orderNo-o.orderNo})}var i=this;i.isNewInput={},i.addNewRow=function(o){var r={id:e.get(),orderNo:i.question.grid.rows.length+1,label:null};o||(i.isNewInput[r.id]=!0),i.question.grid.rows.push(r)},i.addNewCol=function(o){var r={id:e.get(),orderNo:i.question.grid.cols.length+1,label:null};o||(i.isNewInput[r.id]=!0),i.question.grid.cols.push(r)},i.question.grid||(i.question.grid={rows:[],cols:[]},i.addNewRow(),i.addNewCol(!0)),r(i.question.grid.rows),r(i.question.grid.cols),i.rowsSortableConfig={disabled:i.readOnly,placeholder:"beingDragged",handle:".drag-handle",stop:function(e,r){o(i.question.grid.rows)}},i.colsSortableConfig={disabled:i.readOnly,placeholder:"beingDragged",handle:".drag-handle",stop:function(e,r){o(i.question.grid.cols)}},i.removeRow=function(e){var o=i.question.grid.rows.indexOf(e);-1!=o&&i.question.grid.rows.splice(o,1)},i.removeCol=function(e){var o=i.question.grid.cols.indexOf(e);-1!=o&&i.question.grid.cols.splice(o,1)},i.keyPressedOnInput=function(e,o,r){delete i.isNewInput[o.id],13===e.which&&(e.preventDefault(),"row"==r?i.addNewRow():i.addNewCol())}}],link:function(e,o,r,i){e.ctrl}}});
angular.module("mwFormBuilder").directive("mwQuestionDivisionBuilder",function(){return{replace:!0,restrict:"AE",require:"^mwFormQuestionBuilder",scope:{question:"=",readOnly:"=?",options:"=?"},templateUrl:"mw-question-division-builder.html",controllerAs:"ctrl",bindToController:!0,controller:["mwFormUuid",function(i){function e(i){if(i)for(var e=0;e<i.length;e++){var n=i[e];n.orderNo=e+1}}function n(i){i.sort(function(i,e){return i.orderNo-e.orderNo})}var t=this;t.isNewItem={},t.addNewItem=function(e){var n={id:i.get(),orderNo:t.question.divisionList.length+1,value:null};e||(t.isNewItem[n.id]=!0),t.question.divisionList.push(n)},t.question.divisionList||(t.question.divisionList=[],t.addNewItem()),n(t.question.divisionList),t.itemsSortableConfig={disabled:t.readOnly,placeholder:"beingDragged",handle:".drag-handle",stop:function(i,n){e(t.question.divisionList)}},t.removeItem=function(i){var e=t.question.divisionList.indexOf(i);-1!=e&&t.question.divisionList.splice(e,1)},t.keyPressedOnInput=function(i,e){delete t.isNewItem[e.id],13===i.which&&(i.preventDefault(),t.addNewItem())}}],link:function(i,e,n,t){i.ctrl}}});
angular.module("mwFormBuilder").directive("mwLabel",function(){return{replace:!0,restrict:"AE",scope:{labelKey:"@?",labelText:"@?",labelFor:"@",labelClass:"@",labelTranslateValues:"="},templateUrl:"mw-label.html",controllerAs:"ctrl",bindToController:!0,controller:["mwFormUuid",function(l){}],link:function(l,e,r){}}});
angular.module("mwFormBuilder").factory("FormQuestionBuilderId",function(){var e=0;return{next:function(){return++e}}}).directive("mwFormQuestionBuilder",function(){return{replace:!0,restrict:"AE",require:"^mwFormPageElementBuilder",scope:{question:"=",formObject:"=",onReady:"&",isPreview:"=?",readOnly:"=?"},templateUrl:"mw-form-question-builder.html",controllerAs:"ctrl",bindToController:!0,controller:["$timeout","FormQuestionBuilderId","mwFormBuilderOptions",function(e,o,n){function r(){if(s.question.offeredAnswers)for(var e=0;e<s.question.offeredAnswers.length;e++)s.question.offeredAnswers[e].orderNo=e+1}function t(){s.question.offeredAnswers&&s.question.offeredAnswers.sort(function(e,o){return e.orderNo-o.orderNo})}function i(){s.question.offeredAnswers&&s.question.offeredAnswers.forEach(function(e){s.question.pageFlowModifier?e.pageFlow=s.possiblePageFlow[0]:delete e.pageFlow})}var s=this;s.id=o.next(),s.questionTypes=n.questionTypes,s.formSubmitted=!1,t(),s.save=function(){s.formSubmitted=!0,s.form.$valid&&s.onReady()},s.offeredAnswersSortableConfig={disabled:s.readOnly,ghostClass:"beingDragged",handle:".drag-handle",onEnd:function(e,o){r()}},s.questionTypeChanged=function(){"radio"!=s.question.type&&"checkbox"!=s.question.type||s.question.offeredAnswers||(s.question.offeredAnswers=[]),"radio"!=s.question.type&&(i(),e(function(){s.question.pageFlowModifier=!1})),"radio"!=s.question.type&&"checkbox"!=s.question.type&&delete s.question.offeredAnswers,"grid"!=s.question.type&&delete s.question.grid,"priority"!=s.question.type&&delete s.question.priorityList},s.pageFlowModifierChanged=function(){i()}}],link:function(e,o,n,r){var t=e.ctrl;t.possiblePageFlow=r.possiblePageFlow}}});
angular.module("mwFormBuilder").factory("FormParagraphBuilderId",function(){var r=0;return{next:function(){return++r}}}).directive("mwFormParagraphBuilder",function(){return{replace:!0,restrict:"AE",require:"^mwFormPageElementBuilder",scope:{paragraph:"=",formObject:"=",onReady:"&",isPreview:"=?",readOnly:"=?"},templateUrl:"mw-form-paragraph-builder.html",controllerAs:"ctrl",bindToController:!0,controller:["$timeout","FormParagraphBuilderId",function(r,e){var t=this;t.id=e.next(),t.formSubmitted=!1,t.save=function(){t.formSubmitted=!0,t.form.$valid&&t.onReady()}}],link:function(r,e,t,o){r.ctrl}}});
angular.module("mwFormBuilder").directive("mwFormPageElementBuilder",function(){return{replace:!0,restrict:"AE",require:"^mwFormPageBuilder",scope:{pageElement:"=",formObject:"=",isActive:"=",isFirst:"=",isLast:"=",onReady:"&",readOnly:"=?"},templateUrl:"mw-form-page-element-builder.html",controllerAs:"ctrl",bindToController:!0,controller:["mwFormUuid",function(e){var t=this;t.callback=function(e,n){e.preventDefault(),e.stopPropagation(),n.callback&&"function"==typeof n.callback&&n.callback(t.pageElement)},"question"==t.pageElement.type?t.pageElement.question||(t.pageElement.question={id:e.get(),text:null,type:null,required:!0}):"image"==t.pageElement.type?t.pageElement.image||(t.pageElement.image={id:e.get(),align:"left"}):"paragraph"==t.pageElement.type&&(t.pageElement.paragraph||(t.pageElement.paragraph={id:e.get(),html:""}))}],link:function(e,t,n,l){var o=e.ctrl;o.possiblePageFlow=l.possiblePageFlow,o.hoverIn=function(){o.isHovered=!0},o.hoverOut=function(){o.isHovered=!1},o.editElement=function(){l.selectElement(o.pageElement)},o.cloneElement=function(e){e.preventDefault(),e.stopPropagation(),l.cloneElement(o.pageElement)},o.removeElement=function(){l.removeElement(o.pageElement)},o.moveDown=function(){l.moveDownElement(o.pageElement)},o.moveUp=function(){l.moveUpElement(o.pageElement)},o.options=l.options,o.onImageSelection=l.onImageSelection}}});
angular.module("mwFormBuilder").directive("mwFormPageBuilder",function(){return{replace:!0,restrict:"AE",require:"^mwFormBuilder",scope:{formPage:"=",formObject:"=",isFirst:"=",isLast:"=",readOnly:"=?"},templateUrl:"mw-form-page-builder.html",controllerAs:"ctrl",bindToController:!0,controller:["$timeout","mwFormUuid","mwFormClone",function(e,n,o){function t(){for(var e=0;e<a.formPage.elements.length;e++)a.formPage.elements[e].orderNo=e+1}function r(){a.formPage.elements.sort(function(e,n){return e.orderNo-n.orderNo})}function l(e,o){return{id:n.get(),orderNo:o,type:e}}function m(e,n,o){var t=e[n];e.splice(n,1),e.splice(o,0,t)}var a=this;a.hoverEdit=!1,a.formPage.namedPage=!!a.formPage.name,a.isFolded=!1,a.unfold=function(){a.isFolded=!1},a.fold=function(){a.isFolded=!0},r(),a.sortableConfig={disabled:a.readOnly,ghostClass:"beingDragged",group:"survey",handle:".inactive",chosenClass:".page-element-list",onEnd:function(e,n){t()}},a.activeElement=null,a.addElement=function(e){e||(e="question");var n=l(e,a.formPage.elements.length+1);a.activeElement=n,a.formPage.elements.push(n)},a.cloneElement=function(e,n){var t=a.formPage.elements.indexOf(e),r=o.cloneElement(e);n&&(a.activeElement=r),a.formPage.elements.splice(t,0,r)},a.removeElement=function(e){var n=a.formPage.elements.indexOf(e);a.formPage.elements.splice(n,1)},a.moveDownElement=function(e){var n=a.formPage.elements.indexOf(e),o=n+1;o<a.formPage.elements.length&&m(a.formPage.elements,n,o),t()},a.moveUpElement=function(e){var n=a.formPage.elements.indexOf(e),o=n-1;o>=0&&m(a.formPage.elements,n,o),t()},a.addQuestion=function(){a.addElement("question")},a.addImage=function(){a.addElement("image")},a.addParagraph=function(){a.addElement("paragraph")},a.isElementActive=function(e){return a.activeElement==e},a.selectElement=function(e){a.activeElement=e},a.onElementReady=function(){e(function(){a.activeElement=null})},a.hoverIn=function(){a.hoverEdit=!0},a.hoverOut=function(){a.hoverEdit=!1},a.updateElementsOrderNo=t}],link:function(e,n,o,t){var r=e.ctrl;r.possiblePageFlow=t.possiblePageFlow,r.moveDown=function(){t.moveDownPage(r.formPage)},r.moveUp=function(){t.moveUpPage(r.formPage)},r.removePage=function(){t.removePage(r.formPage)},r.addPage=function(){t.addPageAfter(r.formPage)},e.$watch("ctrl.formPage.elements.length",function(e,n){e!=n&&r.updateElementsOrderNo()}),r.options=t.options,r.onImageSelection=t.onImageSelection}}});
angular.module("mwFormBuilder").factory("FormImageBuilderId",function(){var e=0;return{next:function(){return++e}}}).directive("mwFormImageBuilder",function(){return{replace:!0,restrict:"AE",require:"^mwFormPageElementBuilder",scope:{image:"=",formObject:"=",onReady:"&",isPreview:"=?",readOnly:"=?",onImageSelection:"&"},templateUrl:"mw-form-image-builder.html",controllerAs:"ctrl",bindToController:!0,controller:["$timeout","FormImageBuilderId","mwFormUuid",function(e,r,t){var n=this;n.id=r.next(),n.formSubmitted=!1,n.save=function(){n.formSubmitted=!0,n.form.$valid&&n.onReady()},n.selectImageButtonClicked=function(){var e=n.onImageSelection();e.then(function(e){n.image.src=e})["catch"](function(){})},n.setAlign=function(e){n.image.align=e}}],link:function(e,r,t,n){e.ctrl}}});
angular.module("mwFormBuilder").directive("mwFormConfirmationPageBuilder",function(){return{replace:!0,restrict:"AE",scope:{formObject:"=",readOnly:"=?"},templateUrl:"mw-form-confirmation-page-builder.html",controllerAs:"ctrl",bindToController:!0,controller:["$timeout",function(r){var o=this;o.hoverEdit=!1,o.hoverIn=function(){o.hoverEdit=!0},o.hoverOut=function(){o.hoverEdit=!1}}],link:function(r,o,e){}}});
angular.module("mwFormBuilder").directive("mwFormBuilder",function(){return{replace:!0,restrict:"AE",scope:{formData:"=",readOnly:"=?",options:"=?",formStatus:"=?",onImageSelection:"&",api:"=?"},templateUrl:"mw-form-builder.html",controllerAs:"ctrl",bindToController:!0,controller:["mwFormUuid","MW_QUESTION_TYPES","mwFormBuilderOptions",function(e,a,o){function t(a){var o=null;return s.possiblePageFlow&&(o=s.possiblePageFlow[0]),{id:e.get(),number:a,name:null,description:null,pageFlow:o,elements:[]}}function r(){for(var e=0;e<s.formData.pages.length;e++)s.formData.pages[e].number=e+1;s.updatePageFlow()}function n(e,a,o){var t=e[a];e.splice(a,1),e.splice(o,0,t)}var s=this;s.formData.pages&&s.formData.pages.length||(s.formData.pages=[],s.formData.pages.push(t(1))),o.questionTypes=a,o.elementButtons=[],s.options&&(s.options.questionTypes&&(o.questionTypes=s.options.questionTypes),s.options.elementButtons&&(o.elementButtons=s.options.elementButtons)),s.addPage=function(){s.formData.pages.push(t(s.formData.pages.length+1))},s.addPageAfter=function(e){var a=s.formData.pages.indexOf(e),o=a+1,n=t(e.number+1);o<s.formData.pages.length?s.formData.pages.splice(o,0,n):s.formData.pages.push(n),r()},s.moveDownPage=function(e){var a=s.formData.pages.indexOf(e),o=a+1;o<s.formData.pages.length&&n(s.formData.pages,a,o),r()},s.moveUpPage=function(e){var a=s.formData.pages.indexOf(e),o=a-1;o>=0&&n(s.formData.pages,a,o),r()},s.removePage=function(e){var a=s.formData.pages.indexOf(e);s.formData.pages.splice(a,1),r()},s.api&&(s.api.reset=function(){for(var e in s.formData)s.formData.hasOwnProperty(e)&&"pages"!=e&&delete s.formData[e];s.formData.pages.length=0,s.formData.pages.push(t(1))})}],link:function(e,a,o){var t=e.ctrl;t.formStatus&&(t.formStatus.form=t.form),t.possiblePageFlow=[];var r={nextPage:!0,label:"mwForm.pageFlow.goToNextPage"};t.possiblePageFlow.push(r),t.isSamePageFlow=function(e,a){return e.page&&a.page&&e.page.id==a.page.id||e.formSubmit&&a.formSubmit||e.nextPage&&a.nextPage},t.updatePageFlow=function(){t.possiblePageFlow.length=1,t.formData.pages.forEach(function(e){t.possiblePageFlow.push({page:{id:e.id,number:e.number},label:"mwForm.pageFlow.goToPage"})}),t.possiblePageFlow.push({formSubmit:!0,label:"mwForm.pageFlow.submitForm"}),t.formData.pages.forEach(function(e){t.possiblePageFlow.forEach(function(a){e.pageFlow?t.isSamePageFlow(a,e.pageFlow)&&(e.pageFlow=a):e.pageFlow=r,e.elements.forEach(function(e){var o=e.question;o&&o.pageFlowModifier&&o.offeredAnswers.forEach(function(e){e.pageFlow&&t.isSamePageFlow(a,e.pageFlow)&&(e.pageFlow=a)})})})})},e.$watch("ctrl.formData.pages.length",function(e,a){t.updatePageFlow()})}}});
angular.module("mwFormBuilder").directive("wdFocusMe",["$timeout","$parse",function(n,u){return{link:function(o,t,c){var i=u(c.wdFocusMe);o.$watch(i,function(u){u===!0&&n(function(){t[0].focus()})}),t.bind("blur",function(){o.$apply(i.assign(o,!1))})}}}]).factory("focus",["$timeout","$window",function(n,u){return function(o){n(function(){var n=u.document.getElementById(o);n&&n.focus()})}}]);
"use strict";angular.module("mwFormBuilder").directive("mwConfirmClick",["$window",function(i){return{restrict:"A",link:function(n,r,c){var o=c.wdConfirmClick||"Are you sure?";r.bind("click",function(r){i.confirm(o)&&n.$apply(c.confirmedAction)})}}}]);