angular.module("mwFormBuilder",["ngSanitize","ngMaterial","ng-sortable","pascalprecht.translate"]);
angular.module("mwFormBuilder").service("mwFormUuid",function(){function r(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}this.get=function(){return r()+r()+r()+r()+r()+r()+r()+r()}}).factory("mwFormClone",["mwFormUuid",function(r){var e={},n=[];return e.resetIds=function(t,a){if(a&&(n=[]),!(n.indexOf(t)>=0)&&(n.push(t),!t!==Object(t))){if(Array.isArray(t))return void t.forEach(e.resetIds);for(var o in t)t.hasOwnProperty(o)&&e.resetIds(t[o]);if(t.hasOwnProperty("id")){var i=r.get();t.id;t.id=i}}},e.cloneElement=function(r){var n={};return angular.copy(r,n),e.resetIds(n,!0),n},e.clonePage=function(n){var t={};angular.copy(n,t),t.id=r.get();var a=[];if(Array.isArray(n.elements))for(var o=0;o<n.elements.length;o++)a.push(e.cloneElement(n.elements[o]));return t.elements=a,t},e.cloneForm=function(r){var n={};angular.copy(r,n);var t=[];if(Array.isArray(r.pages))for(var a=0;a<r.pages.length;a++)t.push(e.clonePage(r.pages[a]));return n.pages=t,n},e}]);
angular.module("mwFormBuilder").run(["$templateCache",function(e){e.put("mw-form-builder.html",'<div class=mw-form-builder flex><form name=ctrl.form role=form novalidate><div class=mw-title-page><md-input-container class=md-block><mw-label label-for=formName label-key=mwForm.form.name></mw-label><input name=formName id=formName ng-model=ctrl.formData.name ng-readonly=ctrl.readOnly required aria-label=formName></md-input-container><md-input-container class=md-block><mw-label label-for=formDescription label-key=mwForm.form.description></mw-label><textarea name=formDescription ng-model=ctrl.formData.description id=formDescription ng-readonly=ctrl.readOnly md-select-on-focus aria-label=formDescription>\n            </textarea></md-input-container></div><div class=form-page-list><mw-form-page-builder ng-repeat="page in ctrl.formData.pages| mwStartFrom:ctrl.currentPage * ctrl.pageSize | limitTo:ctrl.pageSize" form-page=page form-object=ctrl.formData is-first=$first is-last=$last read-only=ctrl.readOnly></mw-form-page-builder></div><div layout=row><div flex=75><md-button class="md-icon-button launch" ng-disabled="ctrl.currentPage === 0" ng-click="ctrl.currentPage = 0"><i class="fa fa-angle-double-left"></i></md-button><md-button class="md-icon-button launch" ng-disabled="ctrl.currentPage === 0" ng-click="ctrl.currentPage = ctrl.currentPage - 1"><i class="fa fa-angle-left"></i></md-button>{{ctrl.currentPage + 1}}/{{ctrl.numberOfPages()}}<md-button class="md-icon-button launch" ng-disabled="ctrl.currentPage >= ctrl.formData.pages.length / ctrl.pageSize - 1" ng-click="ctrl.currentPage = ctrl.currentPage + 1"><i class="fa fa-angle-right"></i></md-button><md-button class="md-icon-button launch" ng-disabled="ctrl.currentPage >= ctrl.formData.pages.length / ctrl.pageSize - 1" ng-click=ctrl.lastPage()><i class="fa fa-angle-double-right"></i></md-button></div><div flex=25><div layout=row><md-select ng-change=ctrl.onChangePageSize() ng-model=ctrl.pageSize><md-option ng-repeat="item in ctrl.pagesSize" ng-value=item>{{item}}</md-option></md-select><div flex class=text-right><md-button class=mw-add-new-page-button ng-click=ctrl.addPage() ng-if=!ctrl.readOnly><i class="fa fa-plus"></i> <span translate=mwForm.buttons.addPage></span></md-button></div></div></div></div><div layout=row><mw-form-confirmation-page-builder flex form-object=ctrl.formData read-only=ctrl.readOnly></mw-form-confirmation-page-builder></div></form></div>'),e.put("mw-form-confirmation-page-builder.html","<div class=\"mw-form-page-builder mw-confirmation-page\"><div class=mw-page-tab-container><div class=mw-form-page-tab><span class=mw-page-tab-text role=heading translate=mwForm.confirmationPage.title>Strona potwierdzenia</span></div><div class=mw-page-tab-triangle></div></div><div ng-form=ctrl.form novalidate class=form-page-builder-body><md-input-container class=md-block><label>{{'mwForm.confirmationPage.customMessage'|translate}}</label> <textarea name=confirmationMessage rows=5 ng-model=ctrl.formObject.confirmationMessage aria-label=\"{{'mwForm.confirmationPage.customMessage'|translate}}\" ng-disabled=ctrl.readOnly></textarea></md-input-container></div></div>"),e.put("mw-form-image-builder.html",'<div class=mw-form-image-builder-wrapper><div class=mw-form-image-builder ng-class="{\'ng-submitted\':ctrl.formSubmitted}"><div class=image-editor ng-form=ctrl.form ng-if=!ctrl.isPreview><md-button ng-if=!ctrl.image.src ng-click=ctrl.selectImageButtonClicked() class=md-raised translate=mwForm.image.selectImageButton>Select image</md-button><div class=image-edition layout=row ng-if=ctrl.image.src><div flex ng-class="\'align-\'+ctrl.image.align"><img ng-src={{ctrl.image.src}}></div><div flex class=image-align-control><div class=btn-group role=group aria-label="Image align"><button type=button class="btn btn-default" ng-class="{\'selected\': ctrl.image.align==\'left\'}" ng-click="ctrl.setAlign(\'left\')"><i class="fa fa-align-left"></i></button> <button type=button class="btn btn-default" ng-class="{\'selected\': ctrl.image.align==\'center\'}" ng-click="ctrl.setAlign(\'center\')"><i class="fa fa-align-center"></i></button> <button type=button class="btn btn-default" ng-class="{\'selected\': ctrl.image.align==\'right\'}" ng-click="ctrl.setAlign(\'right\')"><i class="fa fa-align-right"></i></button></div></div><div layout=column><md-input-container><label ng-attr-for=image-caption-{{ctrl.id}}>Podpis</label><div flex=66><input type=text name=text ng-attr-id=image-caption-{{ctrl.id}} ng-model=ctrl.image.caption ng-readonly=ctrl.readOnly></div></md-input-container></div></div><div layout=row ng-if=ctrl.image.src><div flex=16><button type=button class="btn btn-primary" ng-click=ctrl.save() translate=mwForm.buttons.questionReady>Gotowe</button></div></div></div><div class=mw-preview ng-if=ctrl.isPreview><figure ng-class="\'align-\'+ctrl.image.align"><img ng-src={{ctrl.image.src}} ng-attr-alt=ctrl.image.caption><figcaption ng-if=ctrl.image.caption>{{ctrl.image.caption}}</figcaption></figure></div></div></div>'),e.put("mw-form-page-builder.html",'<div ng-class="{\'page-folded\': ctrl.isFolded}"><div class=mw-form-page-builder ng-mouseover=ctrl.hoverIn() ng-mouseleave=ctrl.hoverOut()><div class=mw-page-tab-container><div class=mw-form-page-tab><span class=mw-page-tab-text role=heading translate=mwForm.page.tab.heading translate-values="{page: ctrl.formPage.number, allPages:ctrl.formObject.pages.length}">Strona 1 z 3</span><md-switch ng-model=ctrl.formPage.namedPage ng-disabled=ctrl.readOnly><span class=mw-page-tab-checkbox-text translate=mwForm.page.pageWithNameCheckbox>named</span></md-switch></div><div class=mw-page-tab-actions layout=row ng-switch=ctrl.readOnly><md-button class="fold-button md-icon-button launch" ng-click=ctrl.fold() ng-attr-title="{{\'mwForm.buttons.fold\' | translate}}"><md-tooltip md-direction=top>{{\'mwForm.buttons.fold\' | translate}}</md-tooltip><i class="fa fa-compress"></i></md-button><md-button class="unfold-button md-icon-button launch" ng-click=ctrl.unfold() ng-attr-title="{{\'mwForm.buttons.unfold\' | translate}}"><md-tooltip md-direction=top>{{\'mwForm.buttons.unfold\' | translate}}</md-tooltip><i class="fa fa-expand"></i></md-button><div ng-switch-when=false><md-button class="move-down-button md-icon-button launch" ng-click=ctrl.moveDown() ng-if=!ctrl.isLast ng-attr-title="{{\'mwForm.buttons.moveDown\' | translate}}"><md-tooltip md-direction=top>{{\'mwForm.buttons.moveDown\' | translate}}</md-tooltip><i class="fa fa-chevron-down"></i></md-button></div><div ng-switch-when=false><md-button class="move-up-button md-icon-button launch" ng-click=ctrl.moveUp() ng-if=!ctrl.isFirst ng-attr-title="{{\'mwForm.buttons.moveUp\' | translate}}"><md-tooltip md-direction=top>{{\'mwForm.buttons.moveUp\' | translate}}</md-tooltip><i class="fa fa-chevron-up"></i></md-button></div><div ng-switch-when=false><md-button class="remove-button md-icon-button launch" mw-confirm-click confirmed-action=ctrl.removePage() ng-attr-title="{{\'mwForm.buttons.removePage\' | translate}}"><md-tooltip md-direction=top>{{\'mwForm.buttons.removePage\' | translate}}</md-tooltip><i class="fa fa-trash"></i></md-button></div></div></div><div ng-form=ctrl.form novalidate class=form-page-builder-body><md-input-container class=md-block ng-if=ctrl.formPage.namedPage ng-hide=ctrl.isFolded><label ng-attr-for=page-name-{{ctrl.formPage.number}} translate=mwForm.page.name>Nazwa strony</label> <input type=text name=pageName ng-attr-id=page-name-{{ctrl.formPage.number}} ng-model=ctrl.formPage.name ng-readonly=ctrl.readOnly></md-input-container><p ng-show=ctrl.isFolded>{{::ctrl.formPage.name}}</p><div class=page-element-list ng-sortable=ctrl.sortableConfig ng-model=ctrl.formPage.elements><div class="empty-page-element-list-label form-group" ng-if="!ctrl.formPage.elements || (ctrl.formPage.elements && ctrl.formPage.elements.length === 0)"><span translate=mwForm.page.elements.empty>Brak elementów</span></div><mw-form-page-element-builder ng-repeat="element in ctrl.formPage.elements" page-element=element form-object=ctrl.formObject is-active=ctrl.isElementActive(element) on-ready=ctrl.onElementReady() ng-click=ctrl.selectElement(element) is-first=$first is-last=$last read-only=ctrl.readOnly></mw-form-page-element-builder></div><md-menu><md-button aria-label="Add Element" class="md-raised md-mini md-primary" ng-click=$mdOpenMenu($event)><span translate=mwForm.buttons.addElement>Add element</span></md-button><md-menu-content><md-menu-item ng-if="ctrl.isElementTypeEnabled(\'question\')"><md-button ng-click=ctrl.addQuestion()><i class="fa fa-question-circle fa-lg fa-fw"></i> <span translate=mwForm.elements.question>Pytanie</span></md-button></md-menu-item><md-menu-item ng-if="ctrl.isElementTypeEnabled(\'image\')"><md-button ng-click=ctrl.addImage()><i class="fa fa-picture-o fa-lg fa-fw"></i> <span translate=mwForm.elements.image>Obraz</span></md-button></md-menu-item><md-menu-item ng-if="ctrl.isElementTypeEnabled(\'paragraph\')"><md-button ng-click=ctrl.addParagraph()><i class="fa fa-paragraph fa-lg fa-fw"></i> <span translate=mwForm.elements.paragraph>Obraz</span></md-button></md-menu-item><md-menu-item ng-if="ctrl.isElementTypeEnabled(\'response\')"><md-button ng-click=ctrl.addResponse()><i class="fa fa-response fa-lg fa-fw"></i> <span translate=mwForm.elements.response>Obraz</span></md-button></md-menu-item></md-menu-content></md-menu></div><md-button class="md-fab md-mini md-primary md-fab-bottom-right" ng-click=ctrl.addPage() ng-if=!ctrl.readOnly ng-attr-title="{{\'mwForm.buttons.addPage\' | translate}}"><md-tooltip direction=top>{{\'mwForm.buttons.addPage\' | translate}}</md-tooltip><i class="fa fa-plus"></i></md-button></div><div ng-if=!ctrl.isLast class=mw-page-bottom-tab-container><div layout=row class=mw-form-page-bottom-tab><span translate=mwForm.pageFlow.afterPage class=bottom-flow-label translate-values={page:ctrl.formPage.number} ng-attr-for=page-flow-select-{{ctrl.formPage.number}}>Po stronie 1</span><md-select ng-attr-id=page-flow-select-{{ctrl.formPage.number}} ng-model=ctrl.formPage.pageFlow ng-disabled=ctrl.readOnly aria-label="possible page flow" class=bottom-flow-select><md-option ng-repeat="pageFlow in ctrl.possiblePageFlow" ng-value=pageFlow ng-bind-html=(pageFlow.label|translate:pageFlow)></md-option></md-select></div></div></div>'),e.put("mw-form-page-element-builder.html",'<div class=mw-form-page-element-builder-wrapper><div class=mw-form-page-element-builder ng-class="{\'active\': ctrl.isActive, \'inactive draggable\': !ctrl.isActive}"><div class=mw-page-element-actions-tab ng-switch=ctrl.isActive&&!ctrl.readOnly><span class=mw-additional-buttons><md-button ng-click=ctrl.callback($event,button) ng-attr-title="{{button.title | translate}}" ng-class=button.cssClass class=edit-button aria-label="{{button.title | translate}}" aria-hidden=false ng-if="ctrl.filter(button) && !ctrl.readOnly" ng-repeat="button in ctrl.options.elementButtons"><md-tooltip md-direction=right>{{\'button.title\' | translate}}</md-tooltip><i class={{button.icon}}></i> {{button.text}}</md-button></span> <span ng-switch-when=true><md-button class="move-down-button md-icon-button launch" ng-click=ctrl.moveDown() ng-if=!ctrl.isLast ng-attr-title="{{\'mwForm.buttons.moveDown\' | translate}}"><md-tooltip md-direction=top>{{\'mwForm.buttons.moveDown\' | translate}}</md-tooltip><i class="fa fa-chevron-down"></i></md-button><md-button class="move-up-button md-icon-button launch" ng-click=ctrl.moveUp() ng-if=!ctrl.isFirst ng-attr-title="{{\'mwForm.buttons.moveUp\' | translate}}"><md-tooltip md-direction=top>{{\'mwForm.buttons.moveUp\' | translate}}</md-tooltip><i class="fa fa-chevron-up"></i></md-button><md-button class="remove-button md-icon-button launch" mw-confirm-click confirmed-action=ctrl.removeElement() ng-attr-title="{{\'mwForm.buttons.remove\' | translate}}"><md-tooltip md-direction=top>{{\'mwForm.buttons.remove\' | translate}}</md-tooltip><i class="fa fa-trash"></i></md-button></span> <span ng-switch-when=false><md-button aria-label="{{\'mwForm.buttons.clone\' | translate}}" aria-hidden=false class="edit-button md-icon-button launch" ng-click=ctrl.cloneElement($event) ng-if=!ctrl.readOnly ng-attr-title="{{\'mwForm.buttons.clone\' | translate}}"><md-tooltip md-direction=top>{{\'mwForm.buttons.clone\' | translate}}</md-tooltip><i class="fa fa-clone"></i></md-button><md-button aria-label="{{\'mwForm.buttons.edit\' | translate}}" aria-hidden=false class="edit-button md-icon-button launch" ng-click=ctrl.editElement() ng-if=!ctrl.readOnly ng-attr-title="{{\'mwForm.buttons.edit\' | translate}}"><md-tooltip md-direction=top>{{\'mwForm.buttons.edit\' | translate}}</md-tooltip><i class="fa fa-pencil"></i></md-button><md-button aria-label="{{\'mwForm.buttons.view\' | translate}}" aria-hidden=false class="edit-button md-icon-button launch" ng-click=ctrl.editElement() ng-if=ctrl.readOnly ng-attr-title="{{\'mwForm.buttons.view\' | translate}}"><md-tooltip md-direction=top>{{\'mwForm.buttons.view\' | translate}}</md-tooltip><i class="fa fa-eye"></i></md-button></span></div><div ng-switch=ctrl.pageElement.type><mw-form-question-builder ng-switch-when=question question=ctrl.pageElement.question form-object=ctrl.formObject on-ready=ctrl.onReady() is-preview=!ctrl.isActive read-only=ctrl.readOnly></mw-form-question-builder><mw-form-response-builder ng-switch-when=response response=ctrl.pageElement.response form-object=ctrl.formObject on-ready=ctrl.onReady() is-preview=!ctrl.isActive read-only=ctrl.readOnly></mw-form-response-builder><mw-form-image-builder ng-switch-when=image image=ctrl.pageElement.image form-object=ctrl.formObject on-ready=ctrl.onReady() is-preview=!ctrl.isActive read-only=ctrl.readOnly on-image-selection=ctrl.onImageSelection()></mw-form-image-builder><mw-form-paragraph-builder ng-switch-when=paragraph paragraph=ctrl.pageElement.paragraph form-object=ctrl.formObject on-ready=ctrl.onReady() is-preview=!ctrl.isActive read-only=ctrl.readOnly></mw-form-paragraph-builder></div></div></div>'),e.put("mw-form-paragraph-builder.html","<div class=mw-form-paragraph-builder-wrapper><div class=mw-form-paragraph-builder ng-class=\"{'ng-submitted':ctrl.formSubmitted}\"><div class=paragraph-editor ng-form=ctrl.form ng-if=!ctrl.isPreview><md-input-container class=md-block><label>{{'mwForm.paragraph.placeholder'|translate}}</label> <textarea rows=5 ng-model=ctrl.paragraph.html required ng-attr-id=paragraph-textarea-{{ctrl.id}} ng-readonly=ctrl.readOnly></textarea></md-input-container><md-button class=md-raised ng-click=ctrl.save() translate=mwForm.buttons.questionReady>Gotowe</md-button></div><div class=mw-preview ng-if=ctrl.isPreview><p ng-bind=ctrl.paragraph.html></p></div></div></div>"),e.put("mw-form-question-builder.html",'<div class=mw-form-question-builder-wrapper flex><div class=mw-form-question-builder ng-class="{\'ng-submitted\':ctrl.formSubmitted}"><div ng-form=ctrl.form ng-if=!ctrl.isPreview><div layout=row><div flex=60><md-input-container class=md-block><mw-label label-for=question-text-{{ctrl.id}} label-key=mwForm.question.text></mw-label><input type=text name=text ng-attr-id=question-text-{{ctrl.id}} ng-model=ctrl.question.text ng-readonly=ctrl.readOnly required></md-input-container></div><div flex><md-input-container flex><mw-label label-for=question-type-{{ctrl.id}} label-key=mwForm.question.type></mw-label><md-select ng-attr-id=question-type-{{ctrl.id}} ng-model=ctrl.question.type ng-change=ctrl.questionTypeChanged() ng-disabled=ctrl.readOnly required style="min-width: 100px;" aria-label="question Type"><md-option ng-repeat="type in ctrl.questionTypes" value={{type}} translate="{{\'mwForm.question.types.\' + type + \'.name\'}}">{{type}}</md-option></md-select></md-input-container></div><div flex class=mw-question-type ng-repeat="select in ctrl.options.customQuestionSelects"><md-input-container class=md-block><mw-label label-for=question-{{select.key}}-{{ctrl.id}} label-key={{select.label}}></mw-label><md-select ng-attr-id=question-{{opt.key}}-{{ctrl.id}} ng-model=ctrl.question[select.key] ng-disabled=ctrl.readOnly ng-required=select.required aria-label="question Option"><md-option ng-repeat="opt in select.options track by opt.key" value={{opt}}>{{opt.label}}</md-option></md-select></md-input-container></div></div><div ng-if=ctrl.question.type layout=row><div class=mw-form-question-answers-builder ng-switch=ctrl.question.type flex ng-if=ctrl.question.type><div ng-if="ctrl.question.type==\'text\'"><md-input-container class=md-block ng-hide=ctrl.isFolded><label ng-bind-html="\'mwForm.question.preview.text\'|translate"></label> <input type=text disabled value="{{\'mwForm.question.preview.text\'|translate}}"></md-input-container><p ng-bind-html="\'mwForm.question.preview.text\'|translate" ng-show=ctrl.isFolded></p></div><div ng-switch-when=textarea><md-input-container class=md-block><label ng-bind-html="\'mwForm.question.preview.textarea\'|translate"></label> <textarea disabled rows=5>{{\'mwForm.question.preview.textarea\'|translate}}</textarea></md-input-container></div><div ng-switch-when=radio><mw-question-offered-answer-list-builder question=ctrl.question form-object=ctrl.formObject read-only=ctrl.readOnly></mw-question-offered-answer-list-builder></div><div ng-switch-when=checkbox><mw-question-offered-answer-list-builder question=ctrl.question form-object=ctrl.formObject read-only=ctrl.readOnly></mw-question-offered-answer-list-builder></div><div ng-switch-when=priority><mw-question-priority-list-builder question=ctrl.question read-only=ctrl.readOnly></mw-question-priority-list-builder></div><div ng-switch-when=number><div class=range-config layout=row><md-input-container flex><span translate=mwForm.question.number.min>Min</span>: <input type=number ng-model=ctrl.question.min max={{ctrl.question.max}} ng-readonly=ctrl.readOnly></md-input-container><md-input-container flex><span translate=mwForm.question.number.max>Max</span>: <input type=number min={{ctrl.question.min}} ng-model=ctrl.question.max ng-readonly=ctrl.readOnly></md-input-container></div><input type=number disabled></div><div ng-switch-when=date class=md-inline-form><md-input-container class=md-block><input type=date disabled></md-input-container></div><div ng-switch-when=datetime class=md-inline-form><md-input-container class=md-block><input type=datetime disabled></md-input-container></div><div ng-switch-when=time class=md-inline-form><md-input-container class=md-block><input type=datetime disabled></md-input-container></div><div ng-switch-when=email class=md-inline-form><md-input-container class=md-block><input type=email disabled></md-input-container></div><div ng-switch-when=range><div class=range-config layout=row><md-input-container flex><label translate=mwForm.question.range.from>Range from</label> <input type=number ng-model=ctrl.question.min required ng-readonly=ctrl.readOnly></md-input-container><md-input-container flex><label translate=mwForm.question.range.to>to</label> <input type=number ng-model=ctrl.question.max required ng-readonly=ctrl.readOnly></md-input-container></div><div class=mw-range><md-input-container flex><input min=ctrl.question.min max=ctrl.question.max type=range disabled></md-input-container></div></div><div ng-switch-when=url class=md-inline-form><md-input-container class=md-block><input type=url disabled></md-input-container></div></div><div flex=100 ng-if="ctrl.question.type==\'grid\'"><mw-question-grid-builder question=ctrl.question read-only=ctrl.readOnly></mw-question-grid-builder></div><div flex=100 ng-if="ctrl.question.type==\'division\'"><mw-question-division-builder question=ctrl.question read-only=ctrl.readOnly></mw-question-division-builder></div></div><div layout=row layout-xs=column class=mw-form-question-builder-bottom><md-switch ng-model=ctrl.question.required ng-disabled=ctrl.readOnly><span translate=mwForm.question.required>Required</span></md-switch><md-switch aria-label="after Question Answer" ng-model=ctrl.question.pageFlowModifier ng-change=ctrl.pageFlowModifierChanged() ng-readonly=ctrl.readOnly ng-if="ctrl.question.type==\'radio\'"><span translate=mwForm.pageFlow.afterQuestionAnswer>Przejdź do strony w oparciu o odpowiedź</span></md-switch><md-button class="md-raised md-primary" ng-click=ctrl.save() translate=mwForm.buttons.questionReady>Gotowe</md-button></div><md-menu><md-button aria-label="Open phone interactions menu" class=md-icon-button ng-click="ctrl.openMenu($mdOpenMenu, $event)"><md-icon md-menu-origin md-font-icon=fa-menu></md-icon></md-button><md-menu-content width=4><md-menu-item><md-button ng-click=ctrl.redial($event)><md-icon md-svg-icon=call:dialpad md-menu-align-target></md-icon>Redial</md-button></md-menu-item><md-menu-item><md-button disabled=disabled ng-click=ctrl.checkVoicemail()><md-icon md-svg-icon=call:voicemail></md-icon>Check voicemail</md-button></md-menu-item><md-menu-divider></md-menu-divider><md-menu-item><md-button ng-click=ctrl.toggleNotifications()><md-icon md-svg-icon="social:notifications-{{ctrl.notificationsEnabled ? \'off\' : \'on\'}}"></md-icon>{{ctrl.notificationsEnabled ? \'Disable\' : \'Enable\' }} notifications</md-button></md-menu-item></md-menu-content></md-menu></div></div><div class=mw-preview ng-if=ctrl.isPreview><p class=mw-question-text>{{ctrl.question.text}} <span ng-if=ctrl.question.required>*</span></p><div class=question-answers ng-switch=ctrl.question.type layout=row><div ng-switch-when=text flex><md-input-container class=md-block><input type=text disabled value="{{\'mwForm.question.preview.text\'|translate}}"></md-input-container></div><div ng-switch-when=number flex><md-input-container class=md-block><input type=number disabled></md-input-container></div><div ng-switch-when=date flex><md-input-container class=md-block><input type=date disabled></md-input-container></div><div ng-switch-when=datetime flex><md-input-container class=md-block><input type=datetime disabled></md-input-container></div><div ng-switch-when=time flex><md-input-container class=md-block><input type=time disabled></md-input-container></div><div ng-switch-when=email flex><md-input-container class=md-block><input type=email disabled></md-input-container></div><div ng-switch-when=range class=mw-range flex><md-input-container class=md-block><input ng-attr-min={{ctrl.question.min}} ng-attr-max={{ctrl.question.max}} type=range disabled></md-input-container></div><div ng-switch-when=url flex><md-input-container class=md-block><input type=url disabled></md-input-container></div><div ng-switch-when=textarea flex><md-input-container class=md-block><textarea type=text rows=5 disabled>{{\'mwForm.question.preview.textarea\'|translate}}</textarea></md-input-container></div><div ng-switch-when=radio flex><md-radio-group><md-radio-button ng-repeat="answer in ctrl.question.offeredAnswers">{{answer.value}}</md-radio-button><md-radio-button ng-if=ctrl.question.otherAnswer>{{answer.value}} <span translate=mwForm.question.preview.otherAnswer>Inna</span></md-radio-button></md-radio-group></div><div ng-switch-when=checkbox flex><md-checkbox ng-repeat="answer in ctrl.question.offeredAnswers">{{answer.value}}</md-checkbox><md-checkbox ng-if=ctrl.question.otherAnswer><md-input-container><label><span translate=mwForm.question.preview.otherAnswer>Inna</span>:</label> <input type=text disabled></md-input-container></md-checkbox></div><div ng-switch-when=grid flex><div class=table-responsive><table class="table table-condensed table-striped" border=0 cellpadding=5 cellspacing=0><thead><tr><td></td><td ng-repeat="col in ctrl.question.grid.cols"><label>{{col.label}}</label></td></tr></thead><tbody><tr ng-repeat="row in ctrl.question.grid.rows"><td>{{row.label}}</td><td ng-repeat="col in ctrl.question.grid.cols"><input type=radio></td></tr></tbody></table></div></div><div class=mw-priority-list ng-switch-when=priority><table><thead><tr><th translate=mwForm.question.priority.sorted>Sorted</th><th translate=mwForm.question.priority.available>Available</th></tr></thead><tbody><tr><td class=mw-ordered-items></td><td class=mw-available-items><div class=mw-item ng-repeat="item in ctrl.question.priorityList">{{::item.value}}</div></td></tr></tbody></table></div><div ng-switch-when=division flex><div style="margin-bottom: 5px" ng-repeat="item in ctrl.question.divisionList"><md-input-container><label>{{item.value}}</label> <input type=number style="width: 80px"> <span>{{ctrl.question.unit}}</span></md-input-container></div><div class=md-inline-form style="margin-bottom: 5px"><div class=form-group><label translate=mwForm.question.division.assignedSumLabel>Przydzielono</label> <input type=number class="form-control strict-validation" style="width: 80px" readonly value=0> <span>{{ctrl.question.unit}} <span translate=mwForm.question.division.fromRequiredLabel>z wymaganych</span> <strong>{{ctrl.question.quantity}}</strong> {{ctrl.question.unit}}</span></div></div></div></div></div></div>'),e.put("mw-form-response-builder.html",'<div class=mw-form-response-builder-wrapper flex><div class=mw-form-response-builder ng-class="{\'ng-submitted\':ctrl.formSubmitted}"><div ng-form=ctrl.form ng-if=!ctrl.isPreview><div layout=row><div flex=60><md-input-container class=md-block><mw-label label-for=response-text-{{ctrl.id}} label-key=mwForm.response.text></mw-label><input type=text name=text ng-attr-id=response-text-{{ctrl.id}} ng-model=ctrl.response.text ng-readonly=ctrl.readOnly required></md-input-container></div><div flex><md-input-container flex><mw-label label-for=response-type-{{ctrl.id}} label-key=mwForm.response.type></mw-label><md-select ng-attr-id=response-type-{{ctrl.id}} ng-model=ctrl.response.type ng-change=ctrl.responseTypeChanged() ng-disabled=ctrl.readOnly required style="min-width: 100px;" aria-label="response Type"><md-option ng-repeat="type in ctrl.responseTypes" value={{type}} translate="{{\'mwForm.response.types.\' + type + \'.name\'}}">{{type}}</md-option></md-select></md-input-container></div><div flex class=mw-response-type ng-repeat="select in ctrl.options.customQuestionSelects"><md-input-container class=md-block><mw-label label-for=response-{{select.key}}-{{ctrl.id}} label-key={{select.label}}></mw-label><md-select ng-attr-id=response-{{opt.key}}-{{ctrl.id}} ng-model=ctrl.response[select.key] ng-disabled=ctrl.readOnly ng-required=select.required aria-label="response Option"><md-option ng-repeat="opt in select.options track by opt.key" value={{opt}}>{{opt.label}}</md-option></md-select></md-input-container></div></div><div ng-if=ctrl.response.type layout=row><div class=mw-form-response-answers-builder ng-switch=ctrl.response.type flex ng-if=ctrl.response.type><div ng-switch-when=radio><mw-response-expected-answer-list-builder response=ctrl.response form-object=ctrl.formObject read-only=ctrl.readOnly></mw-response-expected-answer-list-builder></div><div ng-switch-when=number><div class=range-config layout=row><md-input-container flex><span translate=mwForm.response.number.expectation>Expection</span>: <input type=number ng-model=ctrl.response.expectation ng-readonly=ctrl.readOnly></md-input-container><md-input-container flex><span translate=mwForm.response.number.tolerance>Tolerance</span>: <input type=number ng-model=ctrl.response.tolerance ng-readonly=ctrl.readOnly></md-input-container></div><input type=number disabled></div></div></div><div layout=row layout-xs=column class=mw-form-response-builder-bottom><md-switch ng-model=ctrl.response.required ng-disabled=ctrl.readOnly><span translate=mwForm.response.required>Required</span></md-switch><md-switch aria-label="after Question Answer" ng-model=ctrl.response.pageFlowModifier ng-change=ctrl.pageFlowModifierChanged() ng-readonly=ctrl.readOnly ng-if="ctrl.response.type==\'radio\'"><span translate=mwForm.pageFlow.afterQuestionAnswer>Przejdź do strony w oparciu o odpowiedź</span></md-switch><md-button class="md-raised md-primary" ng-click=ctrl.save() translate=mwForm.buttons.responseReady>Gotowe</md-button></div></div></div><div class=mw-preview ng-if=ctrl.isPreview><p class=mw-response-text>{{ctrl.response.text}} <span ng-if=ctrl.response.required>*</span></p><div class=response-answers ng-switch=ctrl.response.type layout=row><md-input-container class=md-block ng-switch-when=number><input type=number disabled></md-input-container><md-radio-group ng-switch-when=radio><md-radio-button ng-repeat="answer in ctrl.response.responseAnswers">{{answer.value}}</md-radio-button><md-radio-button ng-if=ctrl.response.otherAnswer>{{answer.value}} <span translate=mwForm.response.preview.otherAnswer>Inna</span></md-radio-button></md-radio-group></div></div></div>'),e.put("mw-label.html","<label ng-attr-for={{::ctrl.labelFor}} ng-attr-class={{::ctrl.labelClass}} ng-bind-html=(ctrl.labelKey|translate:ctrl.labelTranslateValues)></label>"),e.put("mw-question-division-builder.html",'<div class=mw-question-division-builder><div class=form-horizontal><div class=form-group><mw-label label-for=division-quantity-{{ctrl.question.id}} label-class="col-sm-2 control-label" label-key=mwForm.question.division.quantity></mw-label><div class="col-sm-10 col-md-8 form-inline"><input ng-attr-id=division-quantity-{{ctrl.question.id}} type=number ng-model=ctrl.question.quantity required class=form-control min=1 ng-readonly=ctrl.readOnly></div></div><div class=form-group><mw-label label-for=division-unit-{{ctrl.question.id}} label-class="col-sm-2 control-label" label-key=mwForm.question.division.unit></mw-label><div class="col-sm-10 col-md-8 form-inline"><input ng-attr-id=division-unit-{{ctrl.question.id}} type=text ng-model=ctrl.question.unit required class=form-control ng-readonly=ctrl.readOnly></div></div></div><div class="col-sm-10 col-sm-offset-2 col-md-8"><div class=question-division-list ng-sortable=ctrl.itemsSortableConfig ng-model=ctrl.question.divisionList role=list><div class=mw-question-division-list-item ng-repeat="item in ctrl.question.divisionList" role=listitem><div class=drag-handle ng-if=!ctrl.readOnly><i class="fa fa-arrows-v fa-lg handle-inner"></i></div><input wd-focus-me=ctrl.isNewItem[item.id] type=text ng-model=item.value ng-keypress=ctrl.keyPressedOnInput($event,item) required class="form-control item-value" ng-readonly=ctrl.readOnly> <button role=button class=remove-item-button ng-click=ctrl.removeItem(item) ng-if=!ctrl.readOnly><i class="fa fa-times"></i></button></div></div><div class="mw-question-division-list-item add-new-item-widget"><div class=drag-handle></div><span ng-click=ctrl.addNewItem() role=button ng-if=!ctrl.readOnly><input type=text required class=form-control value="Kliknij aby dodać pozycję"></span></div></div></div>'),e.put("mw-question-grid-builder.html",'<div class=mw-question-grid-builder><div class="form-horizontal mw-grid-rows-builder"><div class=mw-grid-row-list ng-sortable=ctrl.rowsSortableConfig ng-model=ctrl.question.grid.rows role=list><div class="mw-grid-item form-group" ng-repeat="row in ctrl.question.grid.rows" role=listitem><mw-label label-for=mw-grid-row-{{row.id}}-label label-class="col-sm-2 control-label" label-key=mwForm.question.grid.rowLabel label-translate-values="{row: row.orderNo}"></mw-label><div class="col-sm-10 col-md-8"><div class=drag-handle><i class="fa fa-arrows-v fa-lg handle-inner"></i></div><input ng-attr-id=mw-grid-row-{{row.id}}-label wd-focus-me=ctrl.isNewInput[row.id] type=text ng-model=row.label ng-keypress="ctrl.keyPressedOnInput($event,row, \'row\')" required class="form-control mw-item-label-value" ng-readonly=ctrl.readOnly> <button role=button class=remove-item-button ng-click=ctrl.removeRow(row) ng-if=!ctrl.readOnly><i class="fa fa-times"></i></button></div></div></div><div class="mw-grid-item form-group add-new-item-widget" ng-if=!ctrl.readOnly><label class="col-sm-2 control-label" translate=mwForm.question.grid.rowLabel translate-values="{row: ctrl.question.grid.rows.length+1}">Etykieta wiersza {{ctrl.question.grid.rows.length+1}}</label><div class="col-sm-10 col-md-8"><div class=drag-handle></div><span ng-click=ctrl.addNewRow() role=button><input type=text required class=form-control value="{{\'mwForm.question.grid.clickToAddRow\'|translate}}"></span></div></div></div><div class=row><div class="mw-grid-separator col-sm-9 col-sm-offset-1"></div></div><div class="form-horizontal mw-grid-cols-builder"><div class=mw-grid-col-list ng-sortable=ctrl.colsSortableConfig ng-model=ctrl.question.grid.cols role=list><div class="mw-grid-item form-group" ng-repeat="col in ctrl.question.grid.cols" role=listitem><mw-label label-for=mw-grid-col-{{col.id}}-label label-class="col-sm-2 control-label" label-key=mwForm.question.grid.columnLabel label-translate-values="{col: col.orderNo}"></mw-label><div class="col-sm-10 col-md-8"><div class=drag-handle><i class="fa fa-arrows-v fa-lg handle-inner"></i></div><input ng-attr-id=mw-grid-col-{{col.id}}-label wd-focus-me=ctrl.isNewInput[col.id] type=text ng-model=col.label ng-keypress="ctrl.keyPressedOnInput($event,col, \'col\')" required class="form-control mw-item-label-value" ng-readonly=ctrl.readOnly> <button role=button class=remove-item-button ng-click=ctrl.removeCol(col) ng-if=!ctrl.readOnly><i class="fa fa-times"></i></button></div></div></div><div class="mw-grid-item form-group add-new-item-widget" ng-if=!ctrl.readOnly><label class="col-sm-2 control-label" translate=mwForm.question.grid.columnLabel translate-values="{col: ctrl.question.grid.cols.length+1}">Etykieta kolumny {{ctrl.question.grid.cols.length+1}}</label><div class="col-sm-10 col-md-8"><div class=drag-handle></div><span ng-click=ctrl.addNewCol() role=button><input type=text required class=form-control value="{{\'mwForm.question.grid.clickToAddColumn\'|translate}}"></span></div></div></div></div>'),
e.put("mw-question-offered-answer-list-builder.html",'<div class=question-offered-answer-list-builder><div class=question-offered-answer-list ng-sortable=ctrl.offeredAnswersSortableConfig ng-model=ctrl.question.offeredAnswers role=list><div class=mw-question-offered-answer layout=row ng-repeat="answer in ctrl.question.offeredAnswers" role=listitem><div flex=5 class=drag-handle ng-if=!ctrl.readOnly><i class="fa fa-arrows-v fa-lg handle-inner"></i></div><div flex><md-input-container flex md-no-float class=md-block><md-icon ng-show="ctrl.question.type==\'radio\'" class="fa fa-circle-thin"></md-icon><md-icon ng-show="ctrl.question.type==\'checkbox\'" class="fa fa-square-o"></md-icon><input wd-focus-me=ctrl.isNewAnswer[answer.id] type=text ng-model=answer.value ng-keypress=ctrl.keyPressedOnInput($event,answer) required class=offered-answer-value ng-readonly=ctrl.readOnly></md-input-container></div><div flex><md-input-container md-no-float class=md-block><md-select ng-model=answer.pageFlow ng-disabled=ctrl.readOnly ng-if=ctrl.question.pageFlowModifier><md-option ng-bind-html=pageFlow.label|translate:pageFlow ng-repeat="pageFlow in ctrl.possiblePageFlow" value={{pageFlow}}></md-option></md-select></md-input-container></div><md-button class=md-icon-button ng-click=ctrl.removeOfferedAnswer(answer) ng-attr-title="{{\'mwForm.buttons.remove\' | translate}}" ng-if=!ctrl.readOnly><md-tooltip direction=top>{{\'mwForm.buttons.remove\' | translate}}</md-tooltip><i class="fa fa-times"></i></md-button></div></div><div class="mw-question-offered-answer add-new-answer-widget" ng-if=!ctrl.readOnly layout=row><div class=drag-handle flex=5></div><div class=flex><md-input-container flex md-no-float class=md-block><md-icon ng-show="ctrl.question.type==\'radio\'" class="fa fa-circle-thin"></md-icon><md-icon ng-show="ctrl.question.type==\'checkbox\'" class="fa fa-square-o"></md-icon><input type=text ng-click=ctrl.addNewOfferedAnswer() class=offered-answer-value value="{{\'mwForm.question.buttons.addOption\'|translate}}"></md-input-container></div><span flex class=add-custom-answer ng-if=!ctrl.question.otherAnswer><span translate=mwForm.question.orLabel>lub</span><md-button class=md-raised ng-click=ctrl.addCustomAnswer() translate=mwForm.question.buttons.addOther>Dodaj "Inne"</md-button></span></div><div class="mw-question-offered-answer custom-answer" ng-if=ctrl.question.otherAnswer layout=row><div class=drag-handle ng-if=!ctrl.readOnly flex=5></div><div flex><md-input-container flex class=md-block><md-icon ng-show="ctrl.question.type==\'radio\'" class="fa fa-circle-thin"></md-icon><md-icon ng-show="ctrl.question.type==\'checkbox\'" class="fa fa-square-o"></md-icon><label translate=mwForm.question.otherLabel>Inna:</label> <input type=text value="{{\'mwForm.question.userAnswer\'|translate}}" class=offered-answer-value readonly></md-input-container></div><md-button class=md-icon-button ng-click=ctrl.removeCustomAnswer() ng-if=!ctrl.readOnly ng-attr-title="{{\'mwForm.buttons.remove\' | translate}}"><md-tooltip direction=top>{{\'mwForm.buttons.remove\' | translate}}</md-tooltip><i class="fa fa-times"></i></md-button></div></div>'),e.put("mw-question-priority-list-builder.html",'<div class=mw-question-priority-list-builder><div class=question-priority-list ng-sortable=ctrl.itemsSortableConfig ng-model=ctrl.question.priorityList role=list><div class=mw-question-priority-list-item ng-repeat="item in ctrl.question.priorityList" role=listitem><div class=drag-handle ng-if=!ctrl.readOnly><i class="fa fa-arrows-v fa-lg handle-inner"></i></div><input wd-focus-me=ctrl.isNewItem[item.id] type=text ng-model=item.value ng-keypress=ctrl.keyPressedOnInput($event,item) required class="form-control item-value" ng-readonly=ctrl.readOnly> <button role=button class=remove-item-button ng-click=ctrl.removeItem(item) ng-if=!ctrl.readOnly><i class="fa fa-times"></i></button></div></div><div class="mw-question-priority-list-item add-new-item-widget" ng-if=!ctrl.readOnly><div class=drag-handle></div><span ng-click=ctrl.addNewItem() role=button><input type=text required class=form-control value="{{\'mwForm.question.priority.clickToAddItem\'|translate}}"></span></div></div>'),e.put("mw-response-expected-answer-list-builder.html",'<div class=response-expected-answer-list-builder><div class=response-expected-answer-list ng-sortable=ctrl.responseAnswersSortableConfig ng-model=ctrl.response.responseAnswers role=list><div class=mw-response-expected-answer layout=row ng-repeat="answer in ctrl.response.responseAnswers" role=listitem><div flex=5 class=drag-handle ng-if=!ctrl.readOnly><i class="fa fa-arrows-v fa-lg handle-inner"></i></div><div flex><md-input-container flex md-no-float class=md-block><md-icon ng-show="ctrl.response.type==\'radio\'" class="fa fa-circle-thin" ng-click=ctrl.expected(answer)></md-icon><md-icon ng-show="ctrl.response.type==\'checkbox\'" class="fa fa-square-o"></md-icon><input wd-focus-me=ctrl.isNewAnswer[answer.id] type=text ng-model=answer.value ng-keypress=ctrl.keyPressedOnInput($event,answer) required class=expected-answer-value ng-readonly=ctrl.readOnly> <span ng-show=answer.expected>이거여야함</span></md-input-container></div><div flex><md-input-container md-no-float class=md-block><md-select ng-model=answer.pageFlow ng-disabled=ctrl.readOnly ng-if=ctrl.response.pageFlowModifier><md-option ng-bind-html=pageFlow.label|translate:pageFlow ng-repeat="pageFlow in ctrl.possiblePageFlow" value={{pageFlow}}></md-option></md-select></md-input-container></div><md-button class=md-icon-button ng-click=ctrl.removeResponseAnswer(answer) ng-attr-title="{{\'mwForm.buttons.remove\' | translate}}" ng-if=!ctrl.readOnly><md-tooltip direction=top>{{\'mwForm.buttons.remove\' | translate}}</md-tooltip><i class="fa fa-times"></i></md-button></div></div><div class="mw-response-expected-answer add-new-answer-widget" ng-if=!ctrl.readOnly layout=row><div class=drag-handle flex=5></div><div class=flex><md-input-container flex md-no-float class=md-block><md-icon ng-show="ctrl.response.type==\'radio\'" class="fa fa-circle-thin"></md-icon><md-icon ng-show="ctrl.response.type==\'checkbox\'" class="fa fa-square-o"></md-icon><input type=text ng-click=ctrl.addNewResponseAnswer() class=expected-answer-value value="{{\'mwForm.response.buttons.addOption\'|translate}}"></md-input-container></div><span flex class=add-custom-answer ng-if=!ctrl.response.otherAnswer><span translate=mwForm.response.orLabel>lub</span><md-button class=md-raised ng-click=ctrl.addCustomAnswer() translate=mwForm.response.buttons.addOther>Dodaj "Inne"</md-button></span></div><div class="mw-response-expected-answer custom-answer" ng-if=ctrl.response.otherAnswer layout=row><div class=drag-handle ng-if=!ctrl.readOnly flex=5></div><div flex><md-input-container flex class=md-block><md-icon ng-show="ctrl.response.type==\'radio\'" class="fa fa-circle-thin"></md-icon><md-icon ng-show="ctrl.response.type==\'checkbox\'" class="fa fa-square-o"></md-icon><label translate=mwForm.response.otherLabel>Inna:</label> <input type=text value="{{\'mwForm.response.userAnswer\'|translate}}" class=expected-answer-value readonly></md-input-container></div><md-button class=md-icon-button ng-click=ctrl.removeCustomAnswer() ng-if=!ctrl.readOnly ng-attr-title="{{\'mwForm.buttons.remove\' | translate}}"><md-tooltip direction=top>{{\'mwForm.buttons.remove\' | translate}}</md-tooltip><i class="fa fa-times"></i></md-button></div></div>')}]);
angular.module("mwFormBuilder").directive("mwResponseExpectedAnswerListBuilder",function(){return{replace:!0,restrict:"AE",require:"^mwFormResponseBuilder",scope:{response:"=",formObject:"=",readOnly:"=?",options:"=?"},templateUrl:"mw-response-expected-answer-list-builder.html",controllerAs:"ctrl",bindToController:!0,controller:["FormResponseBuilderId","mwFormUuid",function(e,s){function r(){if(o.response.responseAnswers)for(var e=0;e<o.response.responseAnswers.length;e++){var s=o.response.responseAnswers[e];s.orderNo=e+1}}function n(){o.response.responseAnswers&&o.response.responseAnswers.sort(function(e,s){return e.orderNo-s.orderNo})}var o=this;o.config={radio:{},checkbox:{}},o.isNewAnswer={},n(),o.responseAnswersSortableConfig={disabled:o.readOnly,ghostClass:"beingDragged",handle:".drag-handle",onEnd:function(e,s){r()}},o.expected=function(e){void 0;for(var s=0;s<o.response.responseAnswers.length;s++)delete o.response.responseAnswers[s].expected;e.expected=!0},o.addNewResponseAnswer=function(){var e=o.possiblePageFlow[0],r={id:s.get(),orderNo:o.response.responseAnswers.length+1,value:null,pageFlow:e};o.isNewAnswer[r.id]=!0,o.response.responseAnswers.push(r)},o.removeResponseAnswer=function(e){var s=o.response.responseAnswers.indexOf(e);-1!=s&&o.response.responseAnswers.splice(s,1)},o.addCustomAnswer=function(){o.response.otherAnswer=!0},o.removeCustomAnswer=function(){o.response.otherAnswer=!1},o.keyPressedOnInput=function(e,s){delete o.isNewAnswer[s.id],13===e.which&&(e.preventDefault(),o.addNewResponseAnswer())}}],link:function(e,s,r,n){var o=e.ctrl;o.possiblePageFlow=n.possiblePageFlow}}});
angular.module("mwFormBuilder").directive("mwQuestionPriorityListBuilder",function(){return{replace:!0,restrict:"AE",require:"^mwFormQuestionBuilder",scope:{question:"=",readOnly:"=?",options:"=?"},templateUrl:"mw-question-priority-list-builder.html",controllerAs:"ctrl",bindToController:!0,controller:["mwFormUuid",function(i){function e(i){if(i)for(var e=0;e<i.length;e++){var t=i[e];t.orderNo=e+1}}function t(i){i.sort(function(i,e){return i.orderNo-e.orderNo})}var r=this;r.isNewItem={},r.addNewItem=function(e){var t={id:i.get(),orderNo:r.question.priorityList.length+1,value:null};e||(r.isNewItem[t.id]=!0),r.question.priorityList.push(t)},r.question.priorityList||(r.question.priorityList=[],r.addNewItem()),t(r.question.priorityList),r.itemsSortableConfig={disabled:r.readOnly,ghostClass:"beingDragged",handle:".drag-handle",onEnd:function(i,t){e(r.question.priorityList)}},r.removeItem=function(i){var e=r.question.priorityList.indexOf(i);-1!=e&&r.question.priorityList.splice(e,1)},r.keyPressedOnInput=function(i,e){delete r.isNewItem[e.id],13===i.which&&(i.preventDefault(),r.addNewItem())}}],link:function(i,e,t,r){i.ctrl}}});
angular.module("mwFormBuilder").directive("mwQuestionOfferedAnswerListBuilder",function(){return{replace:!0,restrict:"AE",require:"^mwFormQuestionBuilder",scope:{question:"=",formObject:"=",readOnly:"=?",options:"=?"},templateUrl:"mw-question-offered-answer-list-builder.html",controllerAs:"ctrl",bindToController:!0,controller:["FormQuestionBuilderId","mwFormUuid",function(e,r){function n(){if(s.question.offeredAnswers)for(var e=0;e<s.question.offeredAnswers.length;e++){var r=s.question.offeredAnswers[e];r.orderNo=e+1}}function o(){s.question.offeredAnswers&&s.question.offeredAnswers.sort(function(e,r){return e.orderNo-r.orderNo})}var s=this;s.config={radio:{},checkbox:{}},s.isNewAnswer={},o(),s.offeredAnswersSortableConfig={disabled:s.readOnly,ghostClass:"beingDragged",handle:".drag-handle",onEnd:function(e,r){n()}},s.addNewOfferedAnswer=function(){var e=s.possiblePageFlow[0],n={id:r.get(),orderNo:s.question.offeredAnswers.length+1,value:null,pageFlow:e};s.isNewAnswer[n.id]=!0,s.question.offeredAnswers.push(n)},s.removeOfferedAnswer=function(e){var r=s.question.offeredAnswers.indexOf(e);-1!=r&&s.question.offeredAnswers.splice(r,1)},s.addCustomAnswer=function(){s.question.otherAnswer=!0},s.removeCustomAnswer=function(){s.question.otherAnswer=!1},s.keyPressedOnInput=function(e,r){delete s.isNewAnswer[r.id],13===e.which&&(e.preventDefault(),s.addNewOfferedAnswer())}}],link:function(e,r,n,o){var s=e.ctrl;s.possiblePageFlow=o.possiblePageFlow}}});
angular.module("mwFormBuilder").directive("mwQuestionGridBuilder",function(){return{replace:!0,restrict:"AE",require:"^mwFormQuestionBuilder",scope:{question:"=",formObject:"=",readOnly:"=?",options:"=?"},templateUrl:"mw-question-grid-builder.html",controllerAs:"ctrl",bindToController:!0,controller:["mwFormUuid",function(e){function o(e){if(e)for(var o=0;o<e.length;o++){var r=e[o];r.orderNo=o+1}}function r(e){e.sort(function(e,o){return e.orderNo-o.orderNo})}var n=this;n.isNewInput={},n.addNewRow=function(o){var r={id:e.get(),orderNo:n.question.grid.rows.length+1,label:null};o||(n.isNewInput[r.id]=!0),n.question.grid.rows.push(r)},n.addNewCol=function(o){var r={id:e.get(),orderNo:n.question.grid.cols.length+1,label:null};o||(n.isNewInput[r.id]=!0),n.question.grid.cols.push(r)},n.question.grid||(n.question.grid={rows:[],cols:[]},n.addNewRow(),n.addNewCol(!0)),r(n.question.grid.rows),r(n.question.grid.cols),n.rowsSortableConfig={disabled:n.readOnly,ghostClass:"beingDragged",handle:".drag-handle",onEnd:function(e,r){o(n.question.grid.rows)}},n.colsSortableConfig={disabled:n.readOnly,ghostClass:"beingDragged",handle:".drag-handle",onEnd:function(e,r){o(n.question.grid.cols)}},n.removeRow=function(e){var o=n.question.grid.rows.indexOf(e);-1!=o&&n.question.grid.rows.splice(o,1)},n.removeCol=function(e){var o=n.question.grid.cols.indexOf(e);-1!=o&&n.question.grid.cols.splice(o,1)},n.keyPressedOnInput=function(e,o,r){delete n.isNewInput[o.id],13===e.which&&(e.preventDefault(),"row"==r?n.addNewRow():n.addNewCol())}}],link:function(e,o,r,n){e.ctrl}}});
angular.module("mwFormBuilder").directive("mwQuestionDivisionBuilder",function(){return{replace:!0,restrict:"AE",require:"^mwFormQuestionBuilder",scope:{question:"=",readOnly:"=?",options:"=?"},templateUrl:"mw-question-division-builder.html",controllerAs:"ctrl",bindToController:!0,controller:["mwFormUuid",function(i){function e(i){if(i)for(var e=0;e<i.length;e++){var n=i[e];n.orderNo=e+1}}function n(i){i.sort(function(i,e){return i.orderNo-e.orderNo})}var t=this;t.isNewItem={},t.addNewItem=function(e){var n={id:i.get(),orderNo:t.question.divisionList.length+1,value:null};e||(t.isNewItem[n.id]=!0),t.question.divisionList.push(n)},t.question.divisionList||(t.question.divisionList=[],t.addNewItem()),n(t.question.divisionList),t.itemsSortableConfig={disabled:t.readOnly,ghostClass:"beingDragged",handle:".drag-handle",onEnd:function(i,n){e(t.question.divisionList)}},t.removeItem=function(i){var e=t.question.divisionList.indexOf(i);-1!=e&&t.question.divisionList.splice(e,1)},t.keyPressedOnInput=function(i,e){delete t.isNewItem[e.id],13===i.which&&(i.preventDefault(),t.addNewItem())}}],link:function(i,e,n,t){i.ctrl}}});
angular.module("mwFormBuilder").directive("mwLabel",function(){return{replace:!0,restrict:"AE",scope:{labelKey:"@?",labelText:"@?",labelFor:"@",labelClass:"@",labelTranslateValues:"="},templateUrl:"mw-label.html",controllerAs:"ctrl",bindToController:!0,controller:["mwFormUuid",function(l){}],link:function(l,e,r){}}});
angular.module("mwFormBuilder").factory("FormResponseBuilderId",function(){var e=0;return{next:function(){return++e}}}).directive("mwFormResponseBuilder",function(){return{replace:!0,restrict:"AE",require:"^mwFormPageElementBuilder",scope:{response:"=",formObject:"=",onReady:"&",isPreview:"=?",readOnly:"=?"},templateUrl:"mw-form-response-builder.html",controllerAs:"ctrl",bindToController:!0,controller:["$timeout","FormResponseBuilderId","mwFormBuilderOptions",function(e,o,s){function r(){if(t.response.responseAnswers)for(var e=0;e<t.response.responseAnswers.length;e++)t.response.responseAnswers[e].orderNo=e+1}function n(){t.response.responseAnswers&&t.response.responseAnswers.sort(function(e,o){return e.orderNo-o.orderNo})}function p(){t.response.responseAnswers&&t.response.responseAnswers.forEach(function(e){t.response.pageFlowModifier?e.pageFlow=t.possiblePageFlow[0]:delete e.pageFlow})}var t=this;void 0,t.id=o.next(),t.responseTypes=s.responseTypes,t.formSubmitted=!1,n(),t.save=function(){t.formSubmitted=!0,t.form.$valid&&t.onReady()},t.responseAnswersSortableConfig={disabled:t.readOnly,ghostClass:"beingDragged",handle:".drag-handle",onEnd:function(e,o){r()}},t.responseTypeChanged=function(){"radio"!=t.response.type&&"checkbox"!=t.response.type||t.response.responseAnswers||(t.response.responseAnswers=[]),"radio"!=t.response.type&&(p(),e(function(){t.response.pageFlowModifier=!1})),"radio"!=t.response.type&&"checkbox"!=t.response.type&&delete t.response.responseAnswers},t.pageFlowModifierChanged=function(){p()}}],link:function(e,o,s,r){void 0;var n=e.ctrl;n.possiblePageFlow=r.possiblePageFlow,n.options=r.options}}});
angular.module("mwFormBuilder").factory("FormQuestionBuilderId",function(){var e=0;return{next:function(){return++e}}}).directive("mwFormQuestionBuilder",function(){return{replace:!0,restrict:"AE",require:"^mwFormPageElementBuilder",scope:{question:"=",formObject:"=",onReady:"&",isPreview:"=?",readOnly:"=?"},templateUrl:"mw-form-question-builder.html",controllerAs:"ctrl",bindToController:!0,controller:["$timeout","FormQuestionBuilderId","mwFormBuilderOptions",function(e,o,n){function r(){if(s.question.offeredAnswers)for(var e=0;e<s.question.offeredAnswers.length;e++)s.question.offeredAnswers[e].orderNo=e+1}function t(){s.question.offeredAnswers&&s.question.offeredAnswers.sort(function(e,o){return e.orderNo-o.orderNo})}function i(){s.question.offeredAnswers&&s.question.offeredAnswers.forEach(function(e){s.question.pageFlowModifier?e.pageFlow=s.possiblePageFlow[0]:delete e.pageFlow})}var s=this;s.id=o.next(),s.questionTypes=n.questionTypes,s.formSubmitted=!1,t(),s.save=function(){s.formSubmitted=!0,s.form.$valid&&s.onReady()},s.offeredAnswersSortableConfig={disabled:s.readOnly,ghostClass:"beingDragged",handle:".drag-handle",onEnd:function(e,o){r()}},s.questionTypeChanged=function(){"radio"!=s.question.type&&"checkbox"!=s.question.type||s.question.offeredAnswers||(s.question.offeredAnswers=[]),"radio"!=s.question.type&&(i(),e(function(){s.question.pageFlowModifier=!1})),"radio"!=s.question.type&&"checkbox"!=s.question.type&&delete s.question.offeredAnswers,"grid"!=s.question.type&&delete s.question.grid,"priority"!=s.question.type&&delete s.question.priorityList},s.pageFlowModifierChanged=function(){i()}}],link:function(e,o,n,r){var t=e.ctrl;t.possiblePageFlow=r.possiblePageFlow,t.options=r.options}}});
angular.module("mwFormBuilder").factory("FormParagraphBuilderId",function(){var r=0;return{next:function(){return++r}}}).directive("mwFormParagraphBuilder",function(){return{replace:!0,restrict:"AE",require:"^mwFormPageElementBuilder",scope:{paragraph:"=",formObject:"=",onReady:"&",isPreview:"=?",readOnly:"=?"},templateUrl:"mw-form-paragraph-builder.html",controllerAs:"ctrl",bindToController:!0,controller:["$timeout","FormParagraphBuilderId",function(r,e){var t=this;t.id=e.next(),t.formSubmitted=!1,t.save=function(){t.formSubmitted=!0,t.form.$valid&&t.onReady()}}],link:function(r,e,t,o){r.ctrl}}});
angular.module("mwFormBuilder").directive("mwFormPageElementBuilder",function(){return{replace:!0,restrict:"AE",require:"^mwFormPageBuilder",scope:{pageElement:"=",formObject:"=",isActive:"=",isFirst:"=",isLast:"=",onReady:"&",readOnly:"=?"},templateUrl:"mw-form-page-element-builder.html",controllerAs:"ctrl",bindToController:!0,controller:["mwFormUuid",function(e){var t=this;t.callback=function(e,n){e.preventDefault(),e.stopPropagation(),n.callback&&"function"==typeof n.callback&&n.callback(t.pageElement)},t.filter=function(e){return!e.showInOpen&&t.isActive?!1:e.showInPreview||t.isActive?e.filter&&"function"==typeof e.filter?e.filter(t.pageElement):!0:!1},"question"==t.pageElement.type?t.pageElement.question||(t.pageElement.question={id:e.get(),text:null,type:null,required:!0}):"image"==t.pageElement.type?t.pageElement.image||(t.pageElement.image={id:e.get(),align:"left"}):"paragraph"==t.pageElement.type?t.pageElement.paragraph||(t.pageElement.paragraph={id:e.get(),html:""}):"response"==t.pageElement.type&&(t.pageElement.response||(t.pageElement.response={id:e.get(),html:""}))}],link:function(e,t,n,l){var o=e.ctrl;o.possiblePageFlow=l.possiblePageFlow,o.hoverIn=function(){o.isHovered=!0},o.hoverOut=function(){o.isHovered=!1},o.editElement=function(){l.selectElement(o.pageElement)},o.cloneElement=function(e){e.preventDefault(),e.stopPropagation(),l.cloneElement(o.pageElement)},o.removeElement=function(){l.removeElement(o.pageElement)},o.moveDown=function(){l.moveDownElement(o.pageElement)},o.moveUp=function(){l.moveUpElement(o.pageElement)},o.options=l.options,o.onImageSelection=l.onImageSelection}}});
angular.module("mwFormBuilder").directive("mwFormPageBuilder",function(){return{replace:!0,restrict:"AE",require:"^mwFormBuilder",scope:{formPage:"=",formObject:"=",isFirst:"=",isLast:"=",readOnly:"=?"},templateUrl:"mw-form-page-builder.html",controllerAs:"ctrl",bindToController:!0,controller:["$timeout","mwFormUuid","mwFormClone","mwFormBuilderOptions",function(e,n,o,t){function r(){for(var e=0;e<i.formPage.elements.length;e++)i.formPage.elements[e].orderNo=e+1}function l(){i.formPage.elements.sort(function(e,n){return e.orderNo-n.orderNo})}function m(e,o){return{id:n.get(),orderNo:o,type:e}}function a(e,n,o){var t=e[n];e.splice(n,1),e.splice(o,0,t)}var i=this;i.hoverEdit=!1,i.formPage.namedPage=!!i.formPage.name,i.isFolded=!1,i.unfold=function(){i.isFolded=!1},i.fold=function(){i.isFolded=!0},l(),i.sortableConfig={disabled:i.readOnly,ghostClass:"beingDragged",group:"survey",handle:".inactive",chosenClass:".page-element-list",onEnd:function(e,n){r()}},i.activeElement=null,i.addElement=function(e){e||(e=t.elementTypes[0]);var n=m(e,i.formPage.elements.length+1);i.activeElement=n,i.formPage.elements.push(n)},i.cloneElement=function(e,n){var t=i.formPage.elements.indexOf(e),r=o.cloneElement(e);n&&(i.activeElement=r),i.formPage.elements.splice(t,0,r)},i.removeElement=function(e){var n=i.formPage.elements.indexOf(e);i.formPage.elements.splice(n,1)},i.moveDownElement=function(e){var n=i.formPage.elements.indexOf(e),o=n+1;o<i.formPage.elements.length&&a(i.formPage.elements,n,o),r()},i.moveUpElement=function(e){var n=i.formPage.elements.indexOf(e),o=n-1;o>=0&&a(i.formPage.elements,n,o),r()},i.isElementTypeEnabled=function(e){return-1!==t.elementTypes.indexOf(e)},i.addQuestion=function(){i.addElement("question")},i.addResponse=function(){i.addElement("response")},i.addImage=function(){i.addElement("image")},i.addParagraph=function(){i.addElement("paragraph")},i.isElementActive=function(e){return i.activeElement==e},i.selectElement=function(e){i.activeElement=e},i.onElementReady=function(){e(function(){i.activeElement=null})},i.hoverIn=function(){i.hoverEdit=!0},i.hoverOut=function(){i.hoverEdit=!1},i.updateElementsOrderNo=r}],link:function(e,n,o,t){var r=e.ctrl;r.possiblePageFlow=t.possiblePageFlow,r.moveDown=function(){t.moveDownPage(r.formPage)},r.moveUp=function(){t.moveUpPage(r.formPage)},r.removePage=function(){t.removePage(r.formPage)},r.addPage=function(){t.addPageAfter(r.formPage)},e.$watch("ctrl.formPage.elements.length",function(e,n){e!=n&&r.updateElementsOrderNo()}),r.options=t.options,r.onImageSelection=t.onImageSelection}}});
angular.module("mwFormBuilder").factory("FormImageBuilderId",function(){var e=0;return{next:function(){return++e}}}).directive("mwFormImageBuilder",function(){return{replace:!0,restrict:"AE",require:"^mwFormPageElementBuilder",scope:{image:"=",formObject:"=",onReady:"&",isPreview:"=?",readOnly:"=?",onImageSelection:"&"},templateUrl:"mw-form-image-builder.html",controllerAs:"ctrl",bindToController:!0,controller:["$timeout","FormImageBuilderId","mwFormUuid",function(e,r,t){var n=this;n.id=r.next(),n.formSubmitted=!1,n.save=function(){n.formSubmitted=!0,n.form.$valid&&n.onReady()},n.selectImageButtonClicked=function(){var e=n.onImageSelection();e.then(function(e){n.image.src=e})["catch"](function(){})},n.setAlign=function(e){n.image.align=e}}],link:function(e,r,t,n){e.ctrl}}});
angular.module("mwFormBuilder").directive("mwFormConfirmationPageBuilder",function(){return{replace:!0,restrict:"AE",scope:{formObject:"=",readOnly:"=?"},templateUrl:"mw-form-confirmation-page-builder.html",controllerAs:"ctrl",bindToController:!0,controller:["$timeout",function(r){var o=this;o.hoverEdit=!1,o.hoverIn=function(){o.hoverEdit=!0},o.hoverOut=function(){o.hoverEdit=!1}}],link:function(r,o,e){}}});
angular.module("mwFormBuilder").directive("mwFormBuilder",function(){return{replace:!0,restrict:"AE",scope:{formData:"=",readOnly:"=?",options:"=?",formStatus:"=?",onImageSelection:"&",api:"=?"},templateUrl:"mw-form-builder.html",controllerAs:"ctrl",bindToController:!0,controller:["mwFormUuid","MW_QUESTION_TYPES","mwFormBuilderOptions",function(e,a,o){function t(a){var o=null;return g.possiblePageFlow&&(o=g.possiblePageFlow[0]),{id:e.get(),number:a,name:null,description:null,pageFlow:o,elements:[]}}function r(){for(var e=0;e<g.formData.pages.length;e++)g.formData.pages[e].number=e+1;g.updatePageFlow()}function n(e,a,o){var t=e[a];e.splice(a,1),e.splice(o,0,t)}var g=this;g.currentPage=0,g.pageSize=10,g.pagesSize=[10,25,50,100],g.formData.pages&&g.formData.pages.length||(g.formData.pages=[],g.formData.pages.push(t(1))),g.options=o.$init(g.options),g.numberOfPages=function(){return Math.ceil(g.formData.pages.length/g.pageSize)},g.lastPage=function(){g.currentPage=Math.ceil(g.formData.pages.length/g.pageSize-1)},g.addPage=function(){g.lastPage(),g.formData.pages.push(t(g.formData.pages.length+1))},g.onChangePageSize=function(){g.currentPage>Math.ceil(g.formData.pages.length/g.pageSize-1)&&(g.currentPage=Math.ceil(g.formData.pages.length/g.pageSize-1))},g.addPageAfter=function(e){var a=g.formData.pages.indexOf(e),o=a+1,n=t(e.number+1);o<g.formData.pages.length?g.formData.pages.splice(o,0,n):g.formData.pages.push(n),r()},g.moveDownPage=function(e){var a=g.formData.pages.indexOf(e),o=a+1;o<g.formData.pages.length&&n(g.formData.pages,a,o),r()},g.moveUpPage=function(e){var a=g.formData.pages.indexOf(e),o=a-1;o>=0&&n(g.formData.pages,a,o),r()},g.removePage=function(e){var a=g.formData.pages.indexOf(e);g.formData.pages.splice(a,1),r()},g.api&&(g.api.reset=function(){for(var e in g.formData)g.formData.hasOwnProperty(e)&&"pages"!=e&&delete g.formData[e];g.formData.pages.length=0,g.formData.pages.push(t(1))})}],link:function(e,a,o){var t=e.ctrl;t.formStatus&&(t.formStatus.form=t.form),t.possiblePageFlow=[];var r={nextPage:!0,label:"mwForm.pageFlow.goToNextPage"};t.possiblePageFlow.push(r),t.isSamePageFlow=function(e,a){return e.page&&a.page&&e.page.id==a.page.id||e.formSubmit&&a.formSubmit||e.nextPage&&a.nextPage},t.updatePageFlow=function(){t.possiblePageFlow.length=1,t.formData.pages.forEach(function(e){t.possiblePageFlow.push({page:{id:e.id,number:e.number},label:"mwForm.pageFlow.goToPage"})}),t.possiblePageFlow.push({formSubmit:!0,label:"mwForm.pageFlow.submitForm"}),t.formData.pages.forEach(function(e){t.possiblePageFlow.forEach(function(a){e.pageFlow?t.isSamePageFlow(a,e.pageFlow)&&(e.pageFlow=a):e.pageFlow=r,e.elements.forEach(function(e){var o=e.question;o&&o.pageFlowModifier&&o.offeredAnswers.forEach(function(e){e.pageFlow&&t.isSamePageFlow(a,e.pageFlow)&&(e.pageFlow=a)})})})})},e.$watch("ctrl.formData.pages.length",function(e,a){t.updatePageFlow()})}}}),angular.module("mwFormBuilder").filter("mwStartFrom",function(){return function(e,a){return a=+a,e.slice(a)}});
angular.module("mwFormBuilder").constant("MW_QUESTION_TYPES",["text","textarea","radio","checkbox","grid","priority","division","number","date","time","email","range","url"]).constant("MW_RESPONSE_TYPES",["radio","number"]).constant("MW_ELEMENT_TYPES",["question","image","paragraph","response"]).factory("mwFormBuilderOptions",["MW_ELEMENT_TYPES","MW_QUESTION_TYPES","MW_RESPONSE_TYPES",function(e,n,t){function l(e,n){return e?e.map(function(e){return angular.extend({},n,e)}):[]}var u={title:null,icon:null,text:null,callback:null,filter:null,showInOpen:!1,showInPreview:!0,cssClass:""},s={key:null,label:null,selects:[],required:!0},r={elementTypes:e,questionTypes:n,responseTypes:t,elementButtons:[],customQuestionSelects:[],customElements:[]},o={$init:function(e){return angular.extend(o,r,e),o.customQuestionSelects=l(o.customQuestionSelects,s),o.elementButtons=l(o.elementButtons,u),o}};return o}]);
angular.module("mwFormBuilder").directive("wdFocusMe",["$timeout","$parse",function(n,u){return{link:function(o,t,c){var i=u(c.wdFocusMe);o.$watch(i,function(u){u===!0&&n(function(){t[0].focus()})}),t.bind("blur",function(){o.$apply(i.assign(o,!1))})}}}]).factory("focus",["$timeout","$window",function(n,u){return function(o){n(function(){var n=u.document.getElementById(o);n&&n.focus()})}}]);
"use strict";angular.module("mwFormBuilder").directive("mwConfirmClick",["$window",function(i){return{restrict:"A",link:function(n,r,c){var o=c.wdConfirmClick||"Are you sure?";r.bind("click",function(r){i.confirm(o)&&n.$apply(c.confirmedAction)})}}}]);